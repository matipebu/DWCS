<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Execute a database command that writes on this server</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="mongodb-driver-server.executereadwritecommand.html">« MongoDB\Driver\Server::executeReadWriteCommand</a></li>
      <li style="float: right;"><a href="mongodb-driver-server.gethost.html">MongoDB\Driver\Server::getHost »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.mongodb-driver-server.html">MongoDB\Driver\Server</a></li>
    <li>Execute a database command that writes on this server</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="mongodb-driver-server.executewritecommand" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">MongoDB\Driver\Server::executeWriteCommand</h1>
  <p class="verinfo">(mongodb &gt;=1.4.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Server::executeWriteCommand</span> &mdash; <span class="dc-title">Execute a database command that writes on this server</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-mongodb-driver-server.executewritecommand-description">
  <h3 class="title">Descripción</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname"><strong>MongoDB\Driver\Server::executeWriteCommand</strong></span>(<span class="methodparam"><span class="type"><a href="language.types.string.html" class="type string">string</a></span> <code class="parameter">$db</code></span>, <span class="methodparam"><span class="type"><a href="class.mongodb-driver-command.html" class="type MongoDB\Driver\Command">MongoDB\Driver\Command</a></span> <code class="parameter">$command</code></span>, <span class="methodparam"><span class="type"><span class="type"><a href="language.types.null.html" class="type null">?</a></span><span class="type"><a href="language.types.array.html" class="type array">array</a></span></span> <code class="parameter">$options</code><span class="initializer"> = <strong><code><a href="reserved.constants.html#constant.null">null</a></code></strong></span></span>): <span class="type"><a href="class.mongodb-driver-cursor.html" class="type MongoDB\Driver\Cursor">MongoDB\Driver\Cursor</a></span></div>

  <p class="para rdfs-comment">
   Executes the command on this server.
  </p>
  <p class="para">
   This method will apply logic that is specific to commands that write (e.g.
   <a href="https://www.mongodb.com/docs/manual/reference/command/drop/" class="link external">&raquo;&nbsp;drop</a>).
   The default value for the <code class="literal">&quot;writeConcern&quot;</code> option will be
   inferred from an active transaction (indicated by the
   <code class="literal">&quot;session&quot;</code> option), followed by the
   <a href="mongodb-driver-manager.construct.html#mongodb-driver-manager.construct-uri" class="link">connection URI</a>.
  </p>
  <blockquote class="note"><p><strong class="note">Nota</strong>: 
   <span class="simpara">
    This method is not intended to be used to execute
    <a href="https://www.mongodb.com/docs/manual/reference/command/insert/" class="link external">&raquo;&nbsp;insert</a>,
    <a href="https://www.mongodb.com/docs/manual/reference/command/update/" class="link external">&raquo;&nbsp;update</a>,
    or <a href="https://www.mongodb.com/docs/manual/reference/command/delete/" class="link external">&raquo;&nbsp;delete</a>
    commands. Users are encouraged to use
    <span class="function"><a href="mongodb-driver-server.executebulkwrite.html" class="function">MongoDB\Driver\Server::executeBulkWrite()</a></span> for those
    operations.
   </span>
  </p></blockquote>
 </div>


 <div class="refsect1 parameters" id="refsect1-mongodb-driver-server.executewritecommand-parameters">
  <h3 class="title">Parámetros</h3>
  <dl>
   

 <dt><code class="parameter">db</code> (<span class="type"><a href="language.types.string.html" class="type string">string</a></span>)</dt>
 <dd>
  <p class="para">
   El nombre de la base de datos en la que ejecutar el comando.
  </p>
 </dd>


   

 <dt><code class="parameter">command</code> (<span class="classname"><a href="class.mongodb-driver-command.html" class="classname">MongoDB\Driver\Command</a></span>)</dt>
 <dd>
  <p class="para">
   El comando a ejecutar.
  </p>
 </dd>


   
    <dt><code class="parameter">options</code></dt>
    <dd>
     <p class="para">
      <table class="doctable table">
       <caption><strong>options</strong></caption>
       
        <thead>
         <tr>
          <th>Option</th>
          <th>Type</th>
          <th>Description</th>
         </tr>

        </thead>

        <tbody class="tbody">
         
<tr>
 <td>session</td>
 <td><span class="classname"><a href="class.mongodb-driver-session.html" class="classname">MongoDB\Driver\Session</a></span></td>
 <td>
  <p class="para">
   Una sesión a asociar con la operación.
  </p>
 </td>
</tr>


         
<tr>
 <td>writeConcern</td>
 <td><span class="classname"><a href="class.mongodb-driver-writeconcern.html" class="classname">MongoDB\Driver\WriteConcern</a></span></td>
 <td>
  <p class="para">
   Un asunto de escritura a aplicar a la operación.
  </p>
 </td>
</tr>


        </tbody>
       
      </table>

     </p>
     
<div class="warning"><strong class="warning">Advertencia</strong>
 <p class="para">
  Si se usa la opción <code class="literal">&quot;session&quot;</code> con sesión que tenga una transacción
  en progreso, no se puede especificar una opción <code class="literal">&quot;readConcern&quot;</code> o
  <code class="literal">&quot;writeConcern&quot;</code>. Esto resultarña en una
  <span class="classname"><a href="class.mongodb-driver-exception-invalidargumentexception.html" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a></span>.
  En su lugar se debería establecer estas dos opciones al crear
  la transacción con
  <span class="methodname"><a href="mongodb-driver-session.starttransaction.html" class="methodname">MongoDB\Driver\Session::startTransaction()</a></span>.
 </p>
</div>

    </dd>
   
  </dl>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-mongodb-driver-server.executewritecommand-returnvalues">
  <h3 class="title">Valores devueltos</h3>
  <p class="para">Devuelve un <span class="classname"><a href="class.mongodb-driver-cursor.html" class="classname">MongoDB\Driver\Cursor</a></span> en caso de éxito.</p>
 </div>


 <div class="refsect1 errors" id="refsect1-mongodb-driver-server.executewritecommand-errors">
  <h3 class="title">Errores/Excepciones</h3>
  <ul class="simplelist">
   <li>Lanza una <span class="classname"><a href="class.mongodb-driver-exception-invalidargumentexception.html" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a></span> si la opción <code class="literal">&quot;session&quot;</code> se usa con una transacción asociada junto a la opción <code class="literal">&quot;readConcern&quot;</code> o <code class="literal">&quot;writeConcern&quot;</code> option.</li>
   <li>Lanza una <span class="classname"><a href="class.mongodb-driver-exception-invalidargumentexception.html" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a></span> si la opción <code class="literal">&quot;session&quot;</code> se usa junto a un asunto de escritura no reconocido.</li>
   <li>Lanza una <span class="classname"><a href="class.mongodb-driver-exception-invalidargumentexception.html" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a></span> en errores de análisis de argumentos.</li><li>Lanza una <span class="classname"><a href="class.mongodb-driver-exception-connectionexception.html" class="classname">MongoDB\Driver\Exception\ConnectionException</a></span> si la conexión al servidor falla (por razones diferentes a la autenticación).</li><li>Lanza una <span class="classname"><a href="class.mongodb-driver-exception-authenticationexception.html" class="classname">MongoDB\Driver\Exception\AuthenticationException</a></span> si la autenticación es necesaria y falla.</li>
   <li>Throws <span class="classname"><a href="class.mongodb-driver-exception-runtimeexception.html" class="classname">MongoDB\Driver\Exception\RuntimeException</a></span> on other errors (e.g. invalid command).</li>
  </ul>
 </div>


 <div class="refsect1 changelog" id="refsect1-mongodb-driver-server.executewritecommand-changelog">
  <h3 class="title">Historial de cambios</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Versión</th>
       <th>Descripción</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>PECL mongodb 1.4.4</td>
       <td>
        <span class="classname"><a href="class.mongodb-driver-exception-invalidargumentexception.html" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a></span>
        will be thrown if the <code class="literal">&quot;session&quot;</code> option is used in
        combination with an unacknowledged write concern.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-mongodb-driver-server.executewritecommand-notes">
  <h3 class="title">Notas</h3>
  
<blockquote class="note"><p><strong class="note">Nota</strong>: 
 <span class="simpara">
  Es responsabilidad del llamador asegurarse de que el servidor es capaz
  de ejecutar la operación de escritura. Por ejemplo, ejecutar un operación de escritura
  en un secundario (excluyendo su base de datos &quot;local&quot;), fallará.
 </span>
</p></blockquote>

 </div>


 <div class="refsect1 seealso" id="refsect1-mongodb-driver-server.executewritecommand-seealso">
  <h3 class="title">Ver también</h3>
  <ul class="simplelist">
   <li><span class="classname"><a href="class.mongodb-driver-command.html" class="classname">MongoDB\Driver\Command</a></span></li>
   <li><span class="classname"><a href="class.mongodb-driver-cursor.html" class="classname">MongoDB\Driver\Cursor</a></span></li>
   <li><span class="function"><a href="mongodb-driver-server.executecommand.html" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::executeCommand()</a> - Execute a database command on this server</span></li>
   <li><span class="function"><a href="mongodb-driver-server.executereadcommand.html" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::executeReadCommand()</a> - Execute a database command that reads on this server</span></li>
   <li><span class="function"><a href="mongodb-driver-server.executereadwritecommand.html" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Server::executeReadWriteCommand()</a> - Execute a database command that reads and writes on this server</span></li>
   <li><span class="function"><a href="mongodb-driver-manager.executewritecommand.html" class="function" rel="rdfs-seeAlso">MongoDB\Driver\Manager::executeWriteCommand()</a> - Execute a database command that writes</span></li>
  </ul>
 </div>


</div></div></div></body></html>