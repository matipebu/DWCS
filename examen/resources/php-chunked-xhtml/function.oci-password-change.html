<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Cambia la contrase&ntilde;a de un usuario de Oracle</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.oci-parse.html">« oci_parse</a></li>
      <li style="float: right;"><a href="function.oci-pconnect.html">oci_pconnect »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.oci8.html">Funciones de OCI8</a></li>
    <li>Cambia la contrase&ntilde;a de un usuario de Oracle</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.oci-password-change" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">oci_password_change</h1>
  <p class="verinfo">(PHP 5, PHP 7, PHP 8, PECL OCI8 &gt;= 1.1.0)</p><p class="refpurpose"><span class="refname">oci_password_change</span> &mdash; <span class="dc-title">Cambia la contraseña de un usuario de Oracle</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.oci-password-change-description">
  <h3 class="title">Descripción</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>oci_password_change</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.resource.html" class="type resource">resource</a></span> <code class="parameter">$connection</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.string.html" class="type string">string</a></span> <code class="parameter">$username</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.string.html" class="type string">string</a></span> <code class="parameter">$old_password</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.string.html" class="type string">string</a></span> <code class="parameter">$new_password</code></span><br>): <span class="type"><a href="language.types.boolean.html" class="type bool">bool</a></span></div>

  <div class="methodsynopsis dc-description"><span class="methodname"><strong>oci_password_change</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.string.html" class="type string">string</a></span> <code class="parameter">$dbname</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.string.html" class="type string">string</a></span> <code class="parameter">$username</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.string.html" class="type string">string</a></span> <code class="parameter">$old_password</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.string.html" class="type string">string</a></span> <code class="parameter">$new_password</code></span><br>): <span class="type"><a href="language.types.resource.html" class="type resource">resource</a></span></div>

  <p class="para rdfs-comment">
   Cambia la contraseña del usuario dado por <code class="parameter">username</code>.
  </p>
  <p class="para">
   La función <span class="function"><strong>oci_password_change()</strong></span> es más útil para scripts de línea de comandos de PHP,
   o cuando se usan conexiones no persistentes a través de una aplicación de PHP.
  </p>
 </div>

 
 <div class="refsect1 parameters" id="refsect1-function.oci-password-change-parameters">
  <h3 class="title">Parámetros</h3>
  <p class="para">
   <dl>
    
     <dt><code class="parameter">connection</code></dt>
     <dd>
      <p class="para">
       Un identificador de conexión de Oracle devuelto por
       <span class="function"><a href="function.oci-connect.html" class="function">oci_connect()</a></span> o <span class="function"><a href="function.oci-pconnect.html" class="function">oci_pconnect()</a></span>.
      </p>
     </dd>
    
    
     <dt><code class="parameter">username</code></dt>
     <dd>
      <p class="para">
       El nombre del usuario de Oracle.
      </p>
     </dd>
    
    
     <dt><code class="parameter">old_password</code></dt>
     <dd>
      <p class="para">
       La contraseña antigua.
      </p>
     </dd>
    
    
     <dt><code class="parameter">new_password</code></dt>
     <dd>
      <p class="para">
       La nueva contraseña a establecer.
      </p>
     </dd>
    
    
     <dt><code class="parameter">dbname</code></dt>
     <dd>
      <p class="para">
       El nombre de la base de datos.
      </p>
     </dd>
    
   </dl>
  </p>
 </div>

 
 <div class="refsect1 returnvalues" id="refsect1-function.oci-password-change-returnvalues">
  <h3 class="title">Valores devueltos</h3>
  <p class="para">
   Devuelve <strong><code><a href="reserved.constants.html#constant.true">true</a></code></strong> en caso de éxito o <strong><code><a href="reserved.constants.html#constant.false">false</a></code></strong> en caso de error.
  </p>
 </div>

 
 <div class="refsect1 examples" id="refsect1-function.oci-password-change-examples">
  <h3 class="title">Ejemplos</h3>
  <p class="para">
   <div class="example" id="example-1870">
    <p><strong>Ejemplo #1 Ejemplo de <span class="function"><strong>oci_password_change()</strong></span> cambiando la contraseña de un usuario ya conectado</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br />$bd                </span><span style="color: #007700">= </span><span style="color: #DD0000">'localhost/orcl'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$usuario           </span><span style="color: #007700">= </span><span style="color: #DD0000">'cj'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$contraseña_actual </span><span style="color: #007700">= </span><span style="color: #DD0000">'welcome'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$contraseña_nueva  </span><span style="color: #007700">= </span><span style="color: #DD0000">'geelong'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$c </span><span style="color: #007700">= </span><span style="color: #0000BB">oci_pconnect</span><span style="color: #007700">(</span><span style="color: #0000BB">$usuario</span><span style="color: #007700">, </span><span style="color: #0000BB">$contraseña_actual</span><span style="color: #007700">, </span><span style="color: #0000BB">$bd</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">oci_password_change</span><span style="color: #007700">(</span><span style="color: #0000BB">$c</span><span style="color: #007700">, </span><span style="color: #0000BB">$usuario</span><span style="color: #007700">, </span><span style="color: #0000BB">$contraseña_actual</span><span style="color: #007700">, </span><span style="color: #0000BB">$contraseña_nueva</span><span style="color: #007700">);<br />echo </span><span style="color: #DD0000">"La nueva contraseña es : " </span><span style="color: #007700">. </span><span style="color: #0000BB">$contraseña_nueva </span><span style="color: #007700">. </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-1871">
    <p><strong>Ejemplo #2 Ejemplo de <span class="function"><strong>oci_password_change()</strong></span> conectando y cambiando la contraseña en un solo paso</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br />$bd                </span><span style="color: #007700">= </span><span style="color: #DD0000">'localhost/orcl'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$usuario           </span><span style="color: #007700">= </span><span style="color: #DD0000">'cj'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$contraseña_actual </span><span style="color: #007700">= </span><span style="color: #DD0000">'welcome'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$contraseña_nueva  </span><span style="color: #007700">= </span><span style="color: #DD0000">'geelong'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$c </span><span style="color: #007700">= </span><span style="color: #0000BB">oci_pconnect</span><span style="color: #007700">(</span><span style="color: #0000BB">$usuario</span><span style="color: #007700">, </span><span style="color: #0000BB">$contraseña_actual</span><span style="color: #007700">, </span><span style="color: #0000BB">$bd</span><span style="color: #007700">);<br />if (!</span><span style="color: #0000BB">$c</span><span style="color: #007700">) {<br />    </span><span style="color: #0000BB">$m </span><span style="color: #007700">= </span><span style="color: #0000BB">oci_error</span><span style="color: #007700">();<br />    if (</span><span style="color: #0000BB">$m</span><span style="color: #007700">[</span><span style="color: #DD0000">'code'</span><span style="color: #007700">] == </span><span style="color: #0000BB">28001</span><span style="color: #007700">) { </span><span style="color: #FF8000">// "ORA-28001: the password has expired"<br />        // Identinficarse y reiniciar la contraseña al mismo tiempo<br />        </span><span style="color: #0000BB">$c </span><span style="color: #007700">= </span><span style="color: #0000BB">oci_password_change</span><span style="color: #007700">(</span><span style="color: #0000BB">$bd</span><span style="color: #007700">, </span><span style="color: #0000BB">$usuario</span><span style="color: #007700">, </span><span style="color: #0000BB">$contraseña_actual</span><span style="color: #007700">, </span><span style="color: #0000BB">$contraseña_nueva</span><span style="color: #007700">);<br />        if (</span><span style="color: #0000BB">$c</span><span style="color: #007700">) {<br />            echo </span><span style="color: #DD0000">"La nueva contraseña es : " </span><span style="color: #007700">. </span><span style="color: #0000BB">$contraseña_nueva </span><span style="color: #007700">. </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />        }<br />    }<br />}<br /><br />if (!</span><span style="color: #0000BB">$c</span><span style="color: #007700">) {  </span><span style="color: #FF8000">// El error original era 28001, o que el cambio de contraseña falló<br />    </span><span style="color: #0000BB">$m </span><span style="color: #007700">= </span><span style="color: #0000BB">oci_error</span><span style="color: #007700">();<br />    </span><span style="color: #0000BB">trigger_error</span><span style="color: #007700">(</span><span style="color: #DD0000">'No se pudo conectar a la base de datos: '</span><span style="color: #007700">. </span><span style="color: #0000BB">$m</span><span style="color: #007700">[</span><span style="color: #DD0000">'message'</span><span style="color: #007700">], </span><span style="color: #0000BB">E_USER_ERROR</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #FF8000">// Usar la conexión $c<br /></span><span style="color: #007700">...<br /><br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

   </div>
  </p>
 </div>

 
 <div class="refsect1 notes" id="refsect1-function.oci-password-change-notes">
  <h3 class="title">Notas</h3>
  <blockquote class="note"><p><strong class="note">Nota</strong>: 
   <p class="para">
    El cambio de la contraseña mediante esta función o directamente en
    Oracle debería hacerse con cuidado. Esto es debido a que las aplicaciones de PHP
    podrían seguir reutilizando con éxito conexiones persistentes mediante
    la autenticación con contraseñas antiguas. La mejor práctica es
    reinicializar todos los servidores web siempre que se cambie una contraseña de usuario.
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Nota</strong>: 
   <p class="para">
    Si se actualizan las bibliotecas cliente o la base de datos de Oracle desde una versión anterior a la 11.2.0.3
    hasta esta misma versión o superior, <span class="function"><strong>oci_password_change()</strong></span> pordría generar el
    error &quot;ORA-1017: invalid username/password&quot; a menos que las versiones del cliente y del servidor
    se actualicen a la vez.
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Nota</strong>: 
   <p class="para">
    Está disponible la segunda sintaxis de <span class="function"><strong>oci_password_change()</strong></span>
    desde la versión 1.1 de OCI8.
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Nota</strong>: 
   <p class="para">
    En versiones de PHP anteriores a la 5.0.0 se debe usar <span class="function"><strong>ocipasswordchange()</strong></span>
    en su lugar. Este nombre aún puede usarse; se dejó como alias de
    <span class="function"><strong>oci_password_change()</strong></span> por razones de retrocompatibilidad.
    Sin embargo, este nombre es obsoleto y no se recomienda.
   </p>
  </p></blockquote>
  
 </div>

 
</div></div></div></body></html>