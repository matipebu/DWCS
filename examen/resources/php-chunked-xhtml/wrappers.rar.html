<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>RAR</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="wrappers.ssh2.html">« ssh2://</a></li>
      <li style="float: right;"><a href="wrappers.audio.html">ogg:// »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="wrappers.html">Protocolos y Envolturas soportados</a></li>
    <li>RAR</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="wrappers.rar" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">rar://</h1>
  <p class="refpurpose"><span class="refname">rar://</span> &mdash; <span class="dc-title">RAR</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-wrappers.rar-description">
  <h3 class="title">Descripción</h3>
  <p class="para">
   Esta envoltura se compone de una ruta al fichero RAR (relativa o absoluta) codificada como URL,
   un asterisco opcional (<code class="literal">*</code>), un signo de número opcional
   (<code class="literal">#</code>) y un nombre de entrada codificado como URL que también es opcional, tal como
   se almacena en el fichero. Cuando se especifique un nombre de entrada, será necesario también
   especificar un signo de número; además, se puede añadir al final del nombre una barra.
  </p>

  <p class="simpara">
   Esta envoltura puede abrir tanto ficheros como directorios. Cuando se abre un directorio, el
   signo asterisco obliga a que los nombres de las entradas del directorio se devuelvan decodificados.
   Si no se especifica, se devolverán codificadas como URL – esto es así para permitir
   hacer un uso correcto de la envoltura con determinadas funcionalidades, como
   <span class="classname"><a href="class.recursivedirectoryiterator.html" class="classname">RecursiveDirectoryIterator</a></span> cuando se está en presencia de nombres de
   ficheros que podrían parecen datos codificados como URL.
  </p>

  <p class="simpara">
   Si no se proporciona ni un signo de número ni tampoco un número de entrada, se mostrará la raíz
   del fichero. La diferencia respecto a directorios convencionales es que el flujo
   no contendrá determinada información, tal como la fecha de modificación, dado que el directorio raíz
   no se almacena dentro el fichero comprimido en de una entrada individual.
   Para usar la envoltura con <span class="classname"><a href="class.recursivedirectoryiterator.html" class="classname">RecursiveDirectoryIterator</a></span> es necesario
   que al acceder al raíz se incluya el signo de número en la URL, para que así
   las URLs de los nodos hijo se puedan construir correctamente.
  </p>
  <blockquote class="note"><p><strong class="note">Nota</strong>: 
   <strong>Esta envoltura no está habilitada por omisión</strong><br />
   <span class="simpara">
    Para poder usar la envoltura <var class="filename">rar://</var>, debe instalarse la
    extensión <a href="https://pecl.php.net/package/rar" class="link external">&raquo;&nbsp;rar</a>
    disponible en <a href="https://pecl.php.net/" class="link external">&raquo;&nbsp;PECL</a>.
   </span>
  </p></blockquote>
  <p class="simpara">
   <var class="filename">rar://</var>
   Disponible desde PECL rar 3.0.0
  </p>

 </div>


 <div class="refsect1 usage" id="refsect1-wrappers.rar-usage"> 
  <h3 class="title">Uso</h3>
  <ul class="itemizedlist">
   <li class="listitem"><span class="simpara"><var class="filename">rar://&lt;nombre de archivo con codificación url&gt;[*][#[&lt;nombre de entrada con codificación url&gt;]]</var></span></li>
  </ul>
 </div>
 

 <div class="refsect1 options" id="refsect1-wrappers.rar-options">
  <h3 class="title">Opciones</h3>
  <p class="para">
   <table class="doctable table">
    <caption><strong>Resumen de la Envoltura</strong></caption>
    
     <thead>
      <tr>
       <th>Atributo</th>
       <th>Permitido</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>Restringido por <a href="filesystem.configuration.html#ini.allow-url-fopen" class="link">allow_url_fopen</a></td>
       <td>No</td>
      </tr>

      <tr>
       <td>Restringido por <a href="filesystem.configuration.html#ini.allow-url-include" class="link">allow_url_include</a></td>
       <td>No</td>
      </tr>

      <tr>
       <td>Permite Lecturas</td>
       <td>Sí</td>
      </tr>

      <tr>
       <td>Permite Escrituras</td>
       <td>No</td>
      </tr>

      <tr>
       <td>Permite Añadir contenido</td>
       <td>No</td>
      </tr>

      <tr>
       <td>Permite Lecturas y Escrituras Simultáneas</td>
       <td>No</td>
      </tr>

      <tr>
       <td>Permite usar la función <span class="function"><a href="function.stat.html" class="function">stat()</a></span></td>
       <td>Sí</td>
      </tr>

      <tr>
       <td>Permite usar la función <span class="function"><a href="function.unlink.html" class="function">unlink()</a></span></td>
       <td>No</td>
      </tr>

      <tr>
       <td>Permite usar la función <span class="function"><a href="function.rename.html" class="function">rename()</a></span></td>
       <td>No</td>
      </tr>

      <tr>
       <td>Permite usar la función <span class="function"><a href="function.mkdir.html" class="function">mkdir()</a></span></td>
       <td>No</td>
      </tr>

      <tr>
       <td>Permite usar la función <span class="function"><a href="function.rmdir.html" class="function">rmdir()</a></span></td>
       <td>No</td>
      </tr>

     </tbody>
    
   </table>

  </p>

  
  <p class="para">
   <table class="doctable table">
    <caption><strong>Opciones de contexto</strong></caption>
    
     <thead>
      <tr>
       <th>Nombre</th>
       <th>Uso</th>
       <th>Valor por omisión</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td><code class="literal">open_password</code></td>
       <td>Si la hubiera, contraseña utilizada para encriptar las cabeceras del archivo.
        WinRAR encriptará todos los ficheros con la misma contraseña
        que la cabecera siempre que ésta esté presente, por lo que se ignorará
        <code class="literal">file_password</code> en archivos que contengan cabeceras encriptadas.
       </td>
       <td class="empty">&nbsp;</td>
      </tr>

      <tr>
       <td><code class="literal">file_password</code></td>
       <td>Si la hubiera, contraseña utilizada para encriptar un fichero. Si las cabeceras
        estuvieran también encriptadas, se ignoraría esta opción en favor de
        <code class="literal">open_password</code>. El motivo por el que hay dos opciones
        es para así cubrir la posibilidad de que haya un archivo con contraseñas
        diferentes para la cabecera y los ficheros. Tenga en cuenta que si
        el archivo no tuviera sus cabeceras encriptadas,
        se ignoraría <code class="literal">open_password</code> y tendría que usarse en su
        lugar esta opción.
       </td>
       <td class="empty">&nbsp;</td>
      </tr>

      <tr>
       <td><code class="literal">volume_callback</code></td>
       <td>Llamada de retorno que determina la ruta de las partes que no se hayan
        podido capturar. Para más información, revise <span class="methodname"><a href="rararchive.open.html" class="methodname">RarArchive::open()</a></span>.
       </td>
       <td class="empty">&nbsp;</td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>
 

 <div class="refsect1 examples" id="refsect1-wrappers.rar-examples">
  <h3 class="title">Ejemplos</h3>
  <div class="example" id="example-431">
   <p><strong>Ejemplo #1 Recorriendo un archivo RAR</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">class </span><span style="color: #0000BB">MyRecDirIt </span><span style="color: #007700">extends </span><span style="color: #0000BB">RecursiveDirectoryIterator </span><span style="color: #007700">{<br />    function </span><span style="color: #0000BB">current</span><span style="color: #007700">() {<br />        return </span><span style="color: #0000BB">rawurldecode</span><span style="color: #007700">(</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getSubPathName</span><span style="color: #007700">()) .<br />            (</span><span style="color: #0000BB">is_dir</span><span style="color: #007700">(</span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">current</span><span style="color: #007700">())?</span><span style="color: #DD0000">" [DIR]"</span><span style="color: #007700">:</span><span style="color: #DD0000">""</span><span style="color: #007700">);<br />    }<br />}<br /><br /></span><span style="color: #0000BB">$f </span><span style="color: #007700">= </span><span style="color: #DD0000">"rar://" </span><span style="color: #007700">. </span><span style="color: #0000BB">rawurlencode</span><span style="color: #007700">(</span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #0000BB">__FILE__</span><span style="color: #007700">)) .<br />    </span><span style="color: #0000BB">DIRECTORY_SEPARATOR </span><span style="color: #007700">. </span><span style="color: #DD0000">'dirs_and_extra_headers.rar#'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$it </span><span style="color: #007700">= new </span><span style="color: #0000BB">RecursiveTreeIterator</span><span style="color: #007700">(new </span><span style="color: #0000BB">MyRecDirIt</span><span style="color: #007700">(</span><span style="color: #0000BB">$f</span><span style="color: #007700">));<br /><br />foreach (</span><span style="color: #0000BB">$it </span><span style="color: #007700">as </span><span style="color: #0000BB">$s</span><span style="color: #007700">) {<br />    echo </span><span style="color: #0000BB">$s</span><span style="color: #007700">, </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

   <div class="example-contents"><p>El resultado del ejemplo
sería algo similar a:</p></div>
   <div class="example-contents screen">
<div class="examplescode"><pre class="examplescode">|-allow_everyone_ni [DIR]
|-file1.txt
|-file2_אּ.txt
|-with_streams.txt
\-אּ [DIR]
  |-אּ\%2Fempty%2E [DIR]
  | \-אּ\%2Fempty%2E\file7.txt
  |-אּ\empty [DIR]
  |-אּ\file3.txt
  |-אּ\file4_אּ.txt
  \-אּ\אּ_2 [DIR]
    |-אּ\אּ_2\file5.txt
    \-אּ\אּ_2\file6_אּ.txt</pre>
</div>
   </div>
  </div>
  <div class="example" id="example-432">
   <p><strong>Ejemplo #2 Abriendo un fichero encriptado (encriptación de cabeceras)</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$stream </span><span style="color: #007700">= </span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #DD0000">"rar://" </span><span style="color: #007700">.<br />    </span><span style="color: #0000BB">rawurlencode</span><span style="color: #007700">(</span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #0000BB">__FILE__</span><span style="color: #007700">)) . </span><span style="color: #0000BB">DIRECTORY_SEPARATOR </span><span style="color: #007700">.<br />    </span><span style="color: #DD0000">'encrypted_headers.rar' </span><span style="color: #007700">. </span><span style="color: #DD0000">'#encfile1.txt'</span><span style="color: #007700">, </span><span style="color: #DD0000">"r"</span><span style="color: #007700">, </span><span style="color: #0000BB">false</span><span style="color: #007700">,<br />    </span><span style="color: #0000BB">stream_context_create</span><span style="color: #007700">(<br />        array(<br />            </span><span style="color: #DD0000">'rar' </span><span style="color: #007700">=&gt;<br />                array(<br />                    </span><span style="color: #DD0000">'open_password' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'samplepassword'<br />                </span><span style="color: #007700">)<br />            )<br />        )<br />    );<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">stream_get_contents</span><span style="color: #007700">(</span><span style="color: #0000BB">$stream</span><span style="color: #007700">));<br /></span><span style="color: #FF8000">/* ni la fecha de creación ni la de último acceso es obligatoria WinRAR,<br /> * por esa razón la mayoría de ficheros no lo tendrán */<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">fstat</span><span style="color: #007700">(</span><span style="color: #0000BB">$stream</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

   <div class="example-contents"><p>El resultado del ejemplo
sería algo similar a:</p></div>
   <div class="example-contents screen">
<div class="examplescode"><pre class="examplescode">string(34) &quot;Contenido del fichero encriptado 1&quot;
Array
(
    [0] =&gt; 0
    [1] =&gt; 0
    [2] =&gt; 33206
    [3] =&gt; 1
    [4] =&gt; 0
    [5] =&gt; 0
    [6] =&gt; 0
    [7] =&gt; 26
    [8] =&gt; 0
    [9] =&gt; 1259550052
    [10] =&gt; 0
    [11] =&gt; -1
    [12] =&gt; -1
    [dev] =&gt; 0
    [ino] =&gt; 0
    [mode] =&gt; 33206
    [nlink] =&gt; 1
    [uid] =&gt; 0
    [gid] =&gt; 0
    [rdev] =&gt; 0
    [size] =&gt; 26
    [atime] =&gt; 0
    [mtime] =&gt; 1259550052
    [ctime] =&gt; 0
    [blksize] =&gt; -1
    [blocks] =&gt; -1
)</pre>
</div>
   </div>
  </div>
 </div>


</div></div></div></body></html>