<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Cancelar una transacci&oacute;n</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.db2-result.html">« db2_result</a></li>
      <li style="float: right;"><a href="function.db2-server-info.html">db2_server_info »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.ibm-db2.html">Funciones de IBM DB2</a></li>
    <li>Cancelar una transacci&oacute;n</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.db2-rollback" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">db2_rollback</h1>
  <p class="verinfo">(PECL ibm_db2 &gt;= 1.0.0)</p><p class="refpurpose"><span class="refname">db2_rollback</span> &mdash; <span class="dc-title">
   Cancelar una transacción
  </span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.db2-rollback-description">
  <h3 class="title">Descripción</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>db2_rollback</strong></span>(<span class="methodparam"><span class="type"><a href="language.types.resource.html" class="type resource">resource</a></span> <code class="parameter">$connection</code></span>): <span class="type"><a href="language.types.boolean.html" class="type bool">bool</a></span></div>


  <p class="para rdfs-comment">
   Cancela una transacción en progreso en el recurso de conexión especificado
   y comienza una nueva transacción. Comunmente las aplicaciones de PHP confirman las 
   transacciones de manera automática por lo que la función <span class="function"><strong>db2_rollback()</strong></span> 
   no tendría efecto a menos que este modo haya sido desactivado para este recurso.
  </p>

 </div>

 <div class="refsect1 parameters" id="refsect1-function.db2-rollback-parameters">
  <h3 class="title">Parámetros</h3>
  <p class="para">
   <dl>
    
     <dt><code class="parameter">connection</code></dt>
     <dd>
      <p class="para">
       Un recurso de conexión válido devuelto por 
       <span class="function"><a href="function.db2-connect.html" class="function">db2_connect()</a></span> o <span class="function"><a href="function.db2-pconnect.html" class="function">db2_pconnect()</a></span>.
      </p>
     </dd>
    
   </dl>
  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.db2-rollback-returnvalues">
  <h3 class="title">Valores devueltos</h3>
  <p class="para">
   Devuelve <strong><code><a href="reserved.constants.html#constant.true">true</a></code></strong> en caso de éxito o <strong><code><a href="reserved.constants.html#constant.false">false</a></code></strong> en caso de error.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.db2-rollback-examples">
  <h3 class="title">Ejemplos</h3>
  <p class="para">
   <div class="example" id="example-1270">
    <p><strong>Ejemplo #1 Cancelando una sentencia DELETE</strong></p>
    <div class="example-contents"><p>
     En el siguiente ejemplo se cuenta el número de filas en una tabla, se cancelan 
     las confirmaciones automáticas en la conexión, se eliminan todas las filas de la tabla 
     y devuelve el total de <code class="literal">0</code> para confirmar que las filas se han borrado. 
     Cuando se llama a <span class="function"><strong>db2_rollback()</strong></span>
     y se devuelve el total actualizado de filas en la tabla para demostrar que el número es 
     igual al original (antes de ejecutar la sentancia DELETE). Esto demuestra 
     que la cancelación de la transacción fue correcto.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$conn </span><span style="color: #007700">= </span><span style="color: #0000BB">db2_connect</span><span style="color: #007700">(</span><span style="color: #0000BB">$database</span><span style="color: #007700">, </span><span style="color: #0000BB">$user</span><span style="color: #007700">, </span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br /><br />if (</span><span style="color: #0000BB">$conn</span><span style="color: #007700">) {<br />    </span><span style="color: #0000BB">$stmt </span><span style="color: #007700">= </span><span style="color: #0000BB">db2_exec</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">, </span><span style="color: #DD0000">"SELECT count(*) FROM animals"</span><span style="color: #007700">);<br />    </span><span style="color: #0000BB">$res </span><span style="color: #007700">= </span><span style="color: #0000BB">db2_fetch_array</span><span style="color: #007700">( </span><span style="color: #0000BB">$stmt </span><span style="color: #007700">);<br />    echo </span><span style="color: #0000BB">$res</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">] . </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />    <br />    </span><span style="color: #FF8000">// Turn AUTOCOMMIT off<br />    </span><span style="color: #0000BB">db2_autocommit</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">, </span><span style="color: #0000BB">DB2_AUTOCOMMIT_OFF</span><span style="color: #007700">);<br />   <br />    </span><span style="color: #FF8000">// Delete all rows from ANIMALS<br />    </span><span style="color: #0000BB">db2_exec</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">, </span><span style="color: #DD0000">"DELETE FROM animals"</span><span style="color: #007700">);<br />    <br />    </span><span style="color: #0000BB">$stmt </span><span style="color: #007700">= </span><span style="color: #0000BB">db2_exec</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">, </span><span style="color: #DD0000">"SELECT count(*) FROM animals"</span><span style="color: #007700">);<br />    </span><span style="color: #0000BB">$res </span><span style="color: #007700">= </span><span style="color: #0000BB">db2_fetch_array</span><span style="color: #007700">( </span><span style="color: #0000BB">$stmt </span><span style="color: #007700">);<br />    echo </span><span style="color: #0000BB">$res</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">] . </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />    <br />    </span><span style="color: #FF8000">// Roll back the DELETE statement<br />    </span><span style="color: #0000BB">db2_rollback</span><span style="color: #007700">( </span><span style="color: #0000BB">$conn </span><span style="color: #007700">);<br />    <br />    </span><span style="color: #0000BB">$stmt </span><span style="color: #007700">= </span><span style="color: #0000BB">db2_exec</span><span style="color: #007700">( </span><span style="color: #0000BB">$conn</span><span style="color: #007700">, </span><span style="color: #DD0000">"SELECT count(*) FROM animals" </span><span style="color: #007700">);<br />    </span><span style="color: #0000BB">$res </span><span style="color: #007700">= </span><span style="color: #0000BB">db2_fetch_array</span><span style="color: #007700">( </span><span style="color: #0000BB">$stmt </span><span style="color: #007700">);<br />    echo </span><span style="color: #0000BB">$res</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">] . </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />    </span><span style="color: #0000BB">db2_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    <div class="example-contents"><p>El resultado del ejemplo sería:</p></div>
    <div class="example-contents screen">
<div class="examplescode"><pre class="examplescode">7
0
7</pre>
</div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.db2-rollback-seealso">
  <h3 class="title">Ver también</h3>
  <p class="para">
   <ul class="simplelist">
    <li><span class="function"><a href="function.db2-autocommit.html" class="function" rel="rdfs-seeAlso">db2_autocommit()</a> - Devuelve o establece el estado de AUTOCOMMIT en una conexi&oacute;n de bases de datos</span></li>
    <li><span class="function"><a href="function.db2-commit.html" class="function" rel="rdfs-seeAlso">db2_commit()</a> - Confirmar una transacci&oacute;n</span></li>
   </ul>
  </p>
 </div>


</div></div></div></body></html>