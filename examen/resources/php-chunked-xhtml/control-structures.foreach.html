<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>foreach</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="control-structures.for.html">« for</a></li>
      <li style="float: right;"><a href="control-structures.break.html">break »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="language.control-structures.html">Estructuras de Control</a></li>
    <li>foreach</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="control-structures.foreach" class="sect1">
 <h2 class="title"><code class="literal">foreach</code></h2>
 <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p>
 <p class="para">
  El constructor <code class="literal">foreach</code> proporciona un modo sencillo de
  iterar sobre arrays. <code class="literal">foreach</code> funciona sólo sobre arrays
  y objetos, y emitirá un error al intentar usarlo con una variable
  de un tipo diferente de datos o una variable no inicializada. Existen dos
  sintaxis:
  <div class="informalexample">
   <div class="example-contents">
<div class="cdata"><pre>
foreach (expresión_array as $valor)
    sentencias
foreach (expresión_array as $clave =&gt; $valor)
    sentencias
</pre></div>
   </div>

  </div>
 </p>
 <p class="simpara">
  La primera forma recorre el array dado por
  <code class="literal">expresión_array</code>. En cada iteración, el valor
  del elemento actual se asigna a <code class="literal">$valor</code> y
  el puntero interno del array avanza una posición (así en la próxima
  iteración se estará observando el siguiente elemento).
 </p>
 <p class="simpara">
  La segunda forma además asigna la clave del elemento actual a
  la variable <code class="literal">$clave</code> en cada iteración.
 </p>
 <p class="simpara">
  También es posible
  <a href="language.oop5.iterations.html" class="link">personalizar la iteración de objetos</a>.
 </p>
 <p class="para">
  <blockquote class="note"><p><strong class="note">Nota</strong>: 
   <p class="para">
    En PHP 5, cuando <code class="literal">foreach</code> inicia su ejecución, el
    puntero interno del array se pone automáticamente en el primer elemento
    del array. Esto significa que no es necesario llamar la función 
    <span class="function"><a href="function.reset.html" class="function">reset()</a></span> antes de un bucle <code class="literal">foreach</code>.
   </p>
   <p class="para">
    Ya que <code class="literal">foreach</code> depende el puntero de array interno en PHP
    5, cambiar éste dentro del bucle puede conducir a un comportamiento inesperado.
   </p>
   <p class="para">
    En PHP 7, <code class="literal">foreach</code> no utiliza el puntero interno
    del array.
   </p>
  </p></blockquote>
 </p>
 <p class="para">
  Para poder modificar directamente los elementos del array dentro de bucle, se ha de anteponer
  &amp; a <code class="literal">$valor</code>. En este caso el valor será asignado por
  <a href="language.references.html" class="link">referencia</a>.
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$array </span><span style="color: #007700">= array(</span><span style="color: #0000BB">1</span><span style="color: #007700">, </span><span style="color: #0000BB">2</span><span style="color: #007700">, </span><span style="color: #0000BB">3</span><span style="color: #007700">, </span><span style="color: #0000BB">4</span><span style="color: #007700">);<br />foreach (</span><span style="color: #0000BB">$array </span><span style="color: #007700">as &amp;</span><span style="color: #0000BB">$valor</span><span style="color: #007700">) {<br />    </span><span style="color: #0000BB">$valor </span><span style="color: #007700">= </span><span style="color: #0000BB">$valor </span><span style="color: #007700">* </span><span style="color: #0000BB">2</span><span style="color: #007700">;<br />}<br /></span><span style="color: #FF8000">// $array ahora es array(2, 4, 6, 8)<br /></span><span style="color: #007700">unset(</span><span style="color: #0000BB">$valor</span><span style="color: #007700">); </span><span style="color: #FF8000">// rompe la referencia con el último elemento<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

  </div>
 </p>
 <div class="warning"><strong class="warning">Advertencia</strong>
  <p class="para">
   La referencia del <code class="literal">$valor</code> y el último elemento del array
   permanecen aún después del bucle <code class="literal">foreach</code>. Se recomienda
   destruirlos con <span class="function"><a href="function.unset.html" class="function">unset()</a></span>.
   De lo contrario, se experimentará el siguiente funcionamiento:
  </p>
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$array </span><span style="color: #007700">= array(</span><span style="color: #0000BB">1</span><span style="color: #007700">, </span><span style="color: #0000BB">2</span><span style="color: #007700">, </span><span style="color: #0000BB">3</span><span style="color: #007700">, </span><span style="color: #0000BB">4</span><span style="color: #007700">);<br />foreach (</span><span style="color: #0000BB">$array </span><span style="color: #007700">as &amp;</span><span style="color: #0000BB">$valor</span><span style="color: #007700">) {<br />    </span><span style="color: #0000BB">$valor </span><span style="color: #007700">= </span><span style="color: #0000BB">$valor </span><span style="color: #007700">* </span><span style="color: #0000BB">2</span><span style="color: #007700">;<br />}<br /></span><span style="color: #FF8000">// $array ahora es array(2, 4, 6, 8)<br /><br />// sin unset($valor), $valor aún es una referencia al último elemento: $array[3]<br /><br /></span><span style="color: #007700">foreach (</span><span style="color: #0000BB">$array </span><span style="color: #007700">as </span><span style="color: #0000BB">$clave </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">$valor</span><span style="color: #007700">) {<br />    </span><span style="color: #FF8000">// $array[3] se actualizará con cada valor de $array...<br />    </span><span style="color: #007700">echo </span><span style="color: #DD0000">"</span><span style="color: #007700">{</span><span style="color: #0000BB">$clave</span><span style="color: #007700">}</span><span style="color: #DD0000"> =&gt; </span><span style="color: #007700">{</span><span style="color: #0000BB">$valor</span><span style="color: #007700">}</span><span style="color: #DD0000"> "</span><span style="color: #007700">;<br />    </span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$array</span><span style="color: #007700">);<br />}<br /></span><span style="color: #FF8000">// ...hasta que finalmente el penúltimo valor se copia al último valor<br /><br />// salida:<br />// 0 =&gt; 2 Array ( [0] =&gt; 2, [1] =&gt; 4, [2] =&gt; 6, [3] =&gt; 2 )<br />// 1 =&gt; 4 Array ( [0] =&gt; 2, [1] =&gt; 4, [2] =&gt; 6, [3] =&gt; 4 )<br />// 2 =&gt; 6 Array ( [0] =&gt; 2, [1] =&gt; 4, [2] =&gt; 6, [3] =&gt; 6 )<br />// 3 =&gt; 6 Array ( [0] =&gt; 2, [1] =&gt; 4, [2] =&gt; 6, [3] =&gt; 6 )<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

  </div>
 </div>
 <p class="para">
  Antes de PHP 5.5.0, referenciar <code class="literal">$valor</code> sólo es posible si el array iterado puede ser
  referenciado (es decir, si es una variable). El siguiente código solamente funciona a partir de PHP 5.5.0:
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">foreach (array(</span><span style="color: #0000BB">1</span><span style="color: #007700">, </span><span style="color: #0000BB">2</span><span style="color: #007700">, </span><span style="color: #0000BB">3</span><span style="color: #007700">, </span><span style="color: #0000BB">4</span><span style="color: #007700">) as &amp;</span><span style="color: #0000BB">$valor</span><span style="color: #007700">) {<br />    </span><span style="color: #0000BB">$valor </span><span style="color: #007700">= </span><span style="color: #0000BB">$valor </span><span style="color: #007700">* </span><span style="color: #0000BB">2</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

  </div>
 </p>
 <p class="para">
  <blockquote class="note"><p><strong class="note">Nota</strong>: 
   <p class="para">
    <code class="literal">foreach</code> no soporta la capacidad de 
    suprimir mensajes de error usando &#039;@&#039;.
   </p>
  </p></blockquote>
 </p>
 <p class="para">
  Algunos ejemplos más para demostrar su uso:
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/* Ejemplo 1 de foreach: sólo el valor */<br /><br /></span><span style="color: #0000BB">$a </span><span style="color: #007700">= array(</span><span style="color: #0000BB">1</span><span style="color: #007700">, </span><span style="color: #0000BB">2</span><span style="color: #007700">, </span><span style="color: #0000BB">3</span><span style="color: #007700">, </span><span style="color: #0000BB">17</span><span style="color: #007700">);<br /><br />foreach (</span><span style="color: #0000BB">$a </span><span style="color: #007700">as </span><span style="color: #0000BB">$v</span><span style="color: #007700">) {<br />    echo </span><span style="color: #DD0000">"Valor actual de \$a: </span><span style="color: #0000BB">$v</span><span style="color: #DD0000">.\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">/* Ejemplo 2 de foreach: valor (con su notación de acceso manual impreso con fines ilustrativos) */<br /><br /></span><span style="color: #0000BB">$a </span><span style="color: #007700">= array(</span><span style="color: #0000BB">1</span><span style="color: #007700">, </span><span style="color: #0000BB">2</span><span style="color: #007700">, </span><span style="color: #0000BB">3</span><span style="color: #007700">, </span><span style="color: #0000BB">17</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$i </span><span style="color: #007700">= </span><span style="color: #0000BB">0</span><span style="color: #007700">; </span><span style="color: #FF8000">/* sólo para efectos ilustrativos */<br /><br /></span><span style="color: #007700">foreach (</span><span style="color: #0000BB">$a </span><span style="color: #007700">as </span><span style="color: #0000BB">$v</span><span style="color: #007700">) {<br />    echo </span><span style="color: #DD0000">"\$a[</span><span style="color: #0000BB">$i</span><span style="color: #DD0000">] =&gt; </span><span style="color: #0000BB">$v</span><span style="color: #DD0000">.\n"</span><span style="color: #007700">;<br />    </span><span style="color: #0000BB">$i</span><span style="color: #007700">++;<br />}<br /><br /></span><span style="color: #FF8000">/* Ejemplo 3 de foreach: clave y valor */<br /><br /></span><span style="color: #0000BB">$a </span><span style="color: #007700">= array(<br />    </span><span style="color: #DD0000">"uno" </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">1</span><span style="color: #007700">,<br />    </span><span style="color: #DD0000">"dos" </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">2</span><span style="color: #007700">,<br />    </span><span style="color: #DD0000">"tres" </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">3</span><span style="color: #007700">,<br />    </span><span style="color: #DD0000">"diecisiete" </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">17<br /></span><span style="color: #007700">);<br /><br />foreach (</span><span style="color: #0000BB">$a </span><span style="color: #007700">as </span><span style="color: #0000BB">$k </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">$v</span><span style="color: #007700">) {<br />    echo </span><span style="color: #DD0000">"\$a[</span><span style="color: #0000BB">$k</span><span style="color: #DD0000">] =&gt; </span><span style="color: #0000BB">$v</span><span style="color: #DD0000">.\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">/* Ejemplo 4 de foreach: arrays multidimensionales */<br /></span><span style="color: #0000BB">$a </span><span style="color: #007700">= array();<br /></span><span style="color: #0000BB">$a</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">][</span><span style="color: #0000BB">0</span><span style="color: #007700">] = </span><span style="color: #DD0000">"a"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$a</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">][</span><span style="color: #0000BB">1</span><span style="color: #007700">] = </span><span style="color: #DD0000">"b"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$a</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">][</span><span style="color: #0000BB">0</span><span style="color: #007700">] = </span><span style="color: #DD0000">"y"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$a</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">][</span><span style="color: #0000BB">1</span><span style="color: #007700">] = </span><span style="color: #DD0000">"z"</span><span style="color: #007700">;<br /><br />foreach (</span><span style="color: #0000BB">$a </span><span style="color: #007700">as </span><span style="color: #0000BB">$v1</span><span style="color: #007700">) {<br />    foreach (</span><span style="color: #0000BB">$v1 </span><span style="color: #007700">as </span><span style="color: #0000BB">$v2</span><span style="color: #007700">) {<br />        echo </span><span style="color: #DD0000">"</span><span style="color: #0000BB">$v2</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />    }<br />}<br /><br /></span><span style="color: #FF8000">/* Ejemplo 5 de foreach: arrays dinámicos */<br /><br /></span><span style="color: #007700">foreach (array(</span><span style="color: #0000BB">1</span><span style="color: #007700">, </span><span style="color: #0000BB">2</span><span style="color: #007700">, </span><span style="color: #0000BB">3</span><span style="color: #007700">, </span><span style="color: #0000BB">4</span><span style="color: #007700">, </span><span style="color: #0000BB">5</span><span style="color: #007700">) as </span><span style="color: #0000BB">$v</span><span style="color: #007700">) {<br />    echo </span><span style="color: #DD0000">"</span><span style="color: #0000BB">$v</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
   </div>

  </div>
 </p>
 
 <div class="sect2" id="control-structures.foreach.list">
  <h3 class="title">Utilizando arrays anidados con list()</h3>
  <p class="verinfo">(PHP 5 &gt;= 5.5.0, PHP 7, PHP 8)</p>
  
  <p class="para">
   PHP 5.5 añade la posibilidad de recorrer un array de arrays y utilizar el
   array interior en las variables del bucle proporcionando <span class="function"><a href="function.list.html" class="function">list()</a></span>
   como el valor.
  </p>
  
  <p class="para">
   Por ejemplo:
   
   <div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$array </span><span style="color: #007700">= [<br />    [</span><span style="color: #0000BB">1</span><span style="color: #007700">, </span><span style="color: #0000BB">2</span><span style="color: #007700">],<br />    [</span><span style="color: #0000BB">3</span><span style="color: #007700">, </span><span style="color: #0000BB">4</span><span style="color: #007700">],<br />];<br /><br />foreach (</span><span style="color: #0000BB">$array </span><span style="color: #007700">as list(</span><span style="color: #0000BB">$a</span><span style="color: #007700">, </span><span style="color: #0000BB">$b</span><span style="color: #007700">)) {<br />    </span><span style="color: #FF8000">// $a contiene el primer elemento del array interior,<br />    // y $b contiene el segundo elemento.<br />    </span><span style="color: #007700">echo </span><span style="color: #DD0000">"A: </span><span style="color: #0000BB">$a</span><span style="color: #DD0000">; B: </span><span style="color: #0000BB">$b</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    <p class="para">El resultado del ejemplo sería:</p>
    <div class="example-contents screen">
<div class="cdata"><pre>
A: 1; B: 2
A: 3; B: 4
</pre></div>
    </div>
   </div>
  </p>
  
  <p class="para">
   Puedes proporcionar menos elementos a <span class="function"><a href="function.list.html" class="function">list()</a></span> de los que
   hay en el array interior, en cuyo caso los elementos sobrantes del array serán
   descartados:
   
   <div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$array </span><span style="color: #007700">= [<br />    [</span><span style="color: #0000BB">1</span><span style="color: #007700">, </span><span style="color: #0000BB">2</span><span style="color: #007700">],<br />    [</span><span style="color: #0000BB">3</span><span style="color: #007700">, </span><span style="color: #0000BB">4</span><span style="color: #007700">],<br />];<br /><br />foreach (</span><span style="color: #0000BB">$array </span><span style="color: #007700">as list(</span><span style="color: #0000BB">$a</span><span style="color: #007700">)) {<br />    </span><span style="color: #FF8000">// Observa que no hay $b en este caso.<br />    </span><span style="color: #007700">echo </span><span style="color: #DD0000">"</span><span style="color: #0000BB">$a</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    <p class="para">El resultado del ejemplo sería:</p>
    <div class="example-contents screen">
<div class="cdata"><pre>
1
3
</pre></div>
    </div>
   </div>
  </p>
  
  <p class="para">
   Se generará un notice si no hay suficientes elementos en el array para completar
   el <span class="function"><a href="function.list.html" class="function">list()</a></span>:
   
   <div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$array </span><span style="color: #007700">= [<br />    [</span><span style="color: #0000BB">1</span><span style="color: #007700">, </span><span style="color: #0000BB">2</span><span style="color: #007700">],<br />    [</span><span style="color: #0000BB">3</span><span style="color: #007700">, </span><span style="color: #0000BB">4</span><span style="color: #007700">],<br />];<br /><br />foreach (</span><span style="color: #0000BB">$array </span><span style="color: #007700">as list(</span><span style="color: #0000BB">$a</span><span style="color: #007700">, </span><span style="color: #0000BB">$b</span><span style="color: #007700">, </span><span style="color: #0000BB">$c</span><span style="color: #007700">)) {<br />    echo </span><span style="color: #DD0000">"A: </span><span style="color: #0000BB">$a</span><span style="color: #DD0000">; B: </span><span style="color: #0000BB">$b</span><span style="color: #DD0000">; C: </span><span style="color: #0000BB">$c</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    <p class="para">El resultado del ejemplo sería:</p>
    <div class="example-contents screen">
<div class="cdata"><pre>

Notice: Undefined offset: 2 in example.php on line 7
A: 1; B: 2; C: 

Notice: Undefined offset: 2 in example.php on line 7
A: 3; B: 4; C: 
</pre></div>
    </div>
   </div>
  </p>
 </div>
 
 <div class="sect2">
  <h3 class="title">Historial de cambios</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>Versión</th>
       <th>Descripción</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>7.0.0</td>
       <td>
        <code class="literal">foreach</code> ya no utiliza el puntero interno al array.
       </td>
      </tr>

      <tr>
       <td>5.5.0</td>
       <td>
        Hacer referencia a <code class="literal">$valor</code> está admitido para expresiones.
        Anteriormente, solamente estaban admitidas las variables.
       </td>
      </tr>

      <tr>
       <td>5.5.0</td>
       <td>
        El desempaquetamiento de arrays anidados con <span class="function"><a href="function.list.html" class="function">list()</a></span> está admitido.
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>
 
</div></div></div></body></html>