<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Crea un hash de contrase&ntilde;a</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.password-get-info.html">« password_get_info</a></li>
      <li style="float: right;"><a href="function.password-needs-rehash.html">password_needs_rehash »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.password.html">Funciones de hashing de contrase&ntilde;as</a></li>
    <li>Crea un hash de contrase&ntilde;a</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.password-hash" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">password_hash</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.5.0, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">password_hash</span> &mdash; <span class="dc-title">Crea un hash de contraseña</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.password-hash-description">
  <h3 class="title">Descripción</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>password_hash</strong></span>(<span class="methodparam"><span class="type"><a href="language.types.string.html" class="type string">string</a></span> <code class="parameter">$password</code></span>, <span class="methodparam"><span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span> <code class="parameter">$algo</code></span>, <span class="methodparam"><span class="type"><a href="language.types.array.html" class="type array">array</a></span> <code class="parameter">$options</code><span class="initializer"> = ?</span></span>): <span class="type"><a href="language.types.string.html" class="type string">string</a></span></div>

  <p class="para rdfs-comment">
   <span class="function"><strong>password_hash()</strong></span> crea un nuevo hash de contraseña usando un algoritmo de hash fuerte
   de único sentido. <span class="function"><strong>password_hash()</strong></span> es compatible con <span class="function"><a href="function.crypt.html" class="function">crypt()</a></span>.
   Por lo tanto, los hash de contraseñas creados con <span class="function"><a href="function.crypt.html" class="function">crypt()</a></span> se pueden usar con
   <span class="function"><strong>password_hash()</strong></span>.
  </p>
  <p class="simpara">
   Actualmente se admiten los siguientes algoritmos:
  </p>
  <p class="para">
   <ul class="itemizedlist">
    <li class="listitem">
     <span class="simpara">
      <strong><code><a href="password.constants.html#constant.password-default">PASSWORD_DEFAULT</a></code></strong> - Usar el algoritmo bcrypt (predeterminado a partir de PHP 5.5.0).
      Observe que esta constante está diseñada para cambiar siempre que se añada un algoritmo nuevo y más fuerte
      a PHP. Por esta razón, la longitud del resultado de usar este identificador puede cambiar con el tiempo.
      Por lo tanto, se recomienda almacenar el resultado en una columna de una base de datos que pueda
      apliarse a más de 60 caracteres (255 caracteres sería una buena elección).
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      <strong><code><a href="password.constants.html#constant.password-bcrypt">PASSWORD_BCRYPT</a></code></strong> - Usar el algoritmo <strong><code><a href="string.constants.html#constant.crypt-blowfish">CRYPT_BLOWFISH</a></code></strong> para
      crear el hash. Producirá un hash estándar compatible con <span class="function"><a href="function.crypt.html" class="function">crypt()</a></span> utilizando
      el identificador &quot;$2y$&quot;. El resultado siempre será un string de 60 caracteres,  o <strong><code><a href="reserved.constants.html#constant.false">false</a></code></strong> en caso de error.
     </span>
     <p class="para">
      Opciones admitidas:
     </p>
     <ul class="itemizedlist">
      <li class="listitem">
       <p class="para">
        <code class="literal">salt</code> - para proporcionar manualmente una sal a usar cuando se realiza el hash de la contraseña.
        Observe que esto sobrescribirá y prevendrá que una sal sea generada automáticamente.
       </p>
       <p class="para">
        Si se omite, se generará una sal aleatoria mediante <span class="function"><strong>password_hash()</strong></span> para
        cada hash. Este es el modo de operación intencionado.
       </p>
       <div class="warning"><strong class="warning">Advertencia</strong>
        <p class="para">
         La opción salt está obsoleta a partir de PHP 7.0.0. Ahora se
         prefiere simplemente utilizar generada de manera predeterminada.
        </p>
       </div>
      </li>
      <li class="listitem">
       <p class="para">
        <code class="literal">cost</code> - denota el coste del algoritmo que debería usarse.
        Se pueden encontrar ejemplo de estos valores en la página de <span class="function"><a href="function.crypt.html" class="function">crypt()</a></span>.
       </p>
       <p class="para">
        Si se omite, se usará el valor predeterminado <code class="literal">10</code>. Este es un buen
        coste de referencia, pero se podría considerar aumentarlo dependiendo del hardware.
       </p>
      </li>
     </ul>
    </li>
   </ul>
  </p>
 </div>

 
 <div class="refsect1 parameters" id="refsect1-function.password-hash-parameters">
  <h3 class="title">Parámetros</h3>
  <dl>
   
    <dt><code class="parameter">password</code></dt>
    <dd>
     <p class="para">
      La contraseña del usuario.
     </p>
     <div class="caution"><strong class="caution">Precaución</strong>
      <p class="para">
       El uso de <strong><code><a href="password.constants.html#constant.password-bcrypt">PASSWORD_BCRYPT</a></code></strong> como el
       algoritmo resultará
       en el truncamiento del parámetro <code class="parameter">password</code> a
       un máximo de 72 caracteres de longitud.
      </p>
     </div>
    </dd>
   
   
    <dt><code class="parameter">algo</code></dt>
    <dd>
     <p class="para">
      A <a href="password.constants.html" class="link">constante del algoritmo de contraseñas</a> indicando qué algoritmo utilizar para crear el hash de la contraseña.
     </p>
    </dd>
   
   
    <dt><code class="parameter">options</code></dt>
    <dd>
     <p class="para">
      Un array asociativo de opciones. Véanse las <a href="password.constants.html" class="link">constantes de algoritmos de contraseñas</a> para la documentación sobre las opociones admitidas de cada algoritmo.
     </p>
     <p class="para">
      Si no se indica, se creará una sal aleatoria y el coste algorítmico por defecto será
      utilizado.
     </p>
    </dd>
   
  </dl>
 </div>

 
 <div class="refsect1 returnvalues" id="refsect1-function.password-hash-returnvalues">
  <h3 class="title">Valores devueltos</h3>
  <p class="para">
   Devuelve el hash de la contraseña,  o <strong><code><a href="reserved.constants.html#constant.false">false</a></code></strong> en caso de error.
  </p>
  <p class="para">
   El algoritmo, coste y sal usados son devueltos como parte del hash. Por lo tanto,
   toda la información que es necesaria para verificar el hash, está incluida en él. Esto permite
   que la función <span class="function"><a href="function.password-verify.html" class="function">password_verify()</a></span> verifique el hash sin tener
   que almacenar por separado la información de la sal o del algoritmo.
  </p>
 </div>

 
 <div class="refsect1 examples" id="refsect1-function.password-hash-examples">
  <h3 class="title">Ejemplos</h3>
  <p class="para">
   <div class="example" id="example-960">
    <p><strong>Ejemplo #1 Ejemplo de <span class="function"><strong>password_hash()</strong></span></strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/**<br /> * Queremos crear un hash de nuestra contraseña uando el algoritmo DEFAULT actual.<br /> * Actualmente es BCRYPT, y producirá un resultado de 60 caracteres.<br /> *<br /> * Hay que tener en cuenta que DEFAULT puede cambiar con el tiempo, por lo que debería prepararse<br /> * para permitir que el almacenamento se amplíe a más de 60 caracteres (255 estaría bien)<br /> */<br /></span><span style="color: #007700">echo </span><span style="color: #0000BB">password_hash</span><span style="color: #007700">(</span><span style="color: #DD0000">"rasmuslerdorf"</span><span style="color: #007700">, </span><span style="color: #0000BB">PASSWORD_DEFAULT</span><span style="color: #007700">).</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    <div class="example-contents"><p>El resultado del ejemplo
sería algo similar a:</p></div>
    <div class="example-contents screen">
<div class="examplescode"><pre class="examplescode">$2y$10$.vGA1O9wmRjrwAVXD98HNOgsNpDczlqm3Jq7KnEd1rVAGv3Fykk1a</pre>
</div>
    </div>
   </div>
  </p> 
  <p class="para">
   <div class="example" id="example-961">
    <p><strong>Ejemplo #2 Ejemplo de <span class="function"><strong>password_hash()</strong></span> estableciendo el coste manualmente</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/**<br /> * En este caso, queremos aumentar el coste predeterminado de BCRYPT a 12.<br /> * Observe que también cambiamos a BCRYPT, que tendrá siempre 60 caracteres.<br /> */<br /></span><span style="color: #0000BB">$opciones </span><span style="color: #007700">= [<br />    </span><span style="color: #DD0000">'cost' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">12</span><span style="color: #007700">,<br />];<br />echo </span><span style="color: #0000BB">password_hash</span><span style="color: #007700">(</span><span style="color: #DD0000">"rasmuslerdorf"</span><span style="color: #007700">, </span><span style="color: #0000BB">PASSWORD_BCRYPT</span><span style="color: #007700">, </span><span style="color: #0000BB">$opciones</span><span style="color: #007700">).</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    <div class="example-contents"><p>El resultado del ejemplo
sería algo similar a:</p></div>
    <div class="example-contents screen">
<div class="examplescode"><pre class="examplescode">$2y$12$QjSH496pcT5CEbzjD/vtVeH03tfHKFy36d4J0Ltp3lRtee9HDxY3K</pre>
</div>
    </div>
   </div>
  </p>
  
  <p class="para">
   <div class="example" id="example-962">
    <p><strong>Ejemplo #3 Ejemplo de <span class="function"><strong>password_hash()</strong></span> estableciendo la sal manualmente</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/**<br /> * Observe que la sal se genera aleatoriamente aquí.<br /> * No use nunca una sal estática o una que no se genere aleatoriamente.<br /> *<br /> * Para la GRAN mayoría de los casos de uso, dejar que password_hash genere la sal aleatoriamente<br /> */<br /></span><span style="color: #0000BB">$opciones </span><span style="color: #007700">= [<br />    </span><span style="color: #DD0000">'cost' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">11</span><span style="color: #007700">,<br />    </span><span style="color: #DD0000">'salt' </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">mcrypt_create_iv</span><span style="color: #007700">(</span><span style="color: #0000BB">22</span><span style="color: #007700">, </span><span style="color: #0000BB">MCRYPT_DEV_URANDOM</span><span style="color: #007700">),<br />];<br />echo </span><span style="color: #0000BB">password_hash</span><span style="color: #007700">(</span><span style="color: #DD0000">"rasmuslerdorf"</span><span style="color: #007700">, </span><span style="color: #0000BB">PASSWORD_BCRYPT</span><span style="color: #007700">, </span><span style="color: #0000BB">$opciones</span><span style="color: #007700">).</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    <div class="example-contents"><p>El resultado del ejemplo
sería algo similar a:</p></div>
    <div class="example-contents screen">
<div class="examplescode"><pre class="examplescode">$2y$11$q5MkhSBtlsJcNEVsYh64a.aCluzHnGog7TQAKVmQwO9C8xb.t89F.</pre>
</div>
    </div>
   </div>
  </p>
  <p class="para">
   <div class="example" id="example-963">
    <p><strong>Ejemplo #4 Ejemplo de <span class="function"><strong>password_hash()</strong></span> buscando un buen coste</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/**<br /> * Este código evaluará el servidor para determinar el coste permitido.<br /> * Se establecerá el mayor coste posible sin disminuir demasiando la velocidad<br /> * del servidor. 8-10 es una buena referencia, y más es bueno si los servidores<br /> * son suficientemente rápidos. El código que sigue tiene como objetivo un tramo de<br /> * ≤ 50 milisegundos, que es una buena referencia para sistemas con registros interactivos.<br /> */<br /></span><span style="color: #0000BB">$timeTarget </span><span style="color: #007700">= </span><span style="color: #0000BB">0.05</span><span style="color: #007700">; </span><span style="color: #FF8000">// 50 milisegundos <br /><br /></span><span style="color: #0000BB">$coste </span><span style="color: #007700">= </span><span style="color: #0000BB">8</span><span style="color: #007700">;<br />do {<br />    </span><span style="color: #0000BB">$coste</span><span style="color: #007700">++;<br />    </span><span style="color: #0000BB">$inicio </span><span style="color: #007700">= </span><span style="color: #0000BB">microtime</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br />    </span><span style="color: #0000BB">password_hash</span><span style="color: #007700">(</span><span style="color: #DD0000">"test"</span><span style="color: #007700">, </span><span style="color: #0000BB">PASSWORD_BCRYPT</span><span style="color: #007700">, [</span><span style="color: #DD0000">"cost" </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">$coste</span><span style="color: #007700">]);<br />    </span><span style="color: #0000BB">$fin </span><span style="color: #007700">= </span><span style="color: #0000BB">microtime</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">);<br />} while ((</span><span style="color: #0000BB">$fin </span><span style="color: #007700">- </span><span style="color: #0000BB">$inicio</span><span style="color: #007700">) &lt; </span><span style="color: #0000BB">$timeTarget</span><span style="color: #007700">);<br /><br />echo </span><span style="color: #DD0000">"Coste apropiado encontrado: " </span><span style="color: #007700">. </span><span style="color: #0000BB">$coste </span><span style="color: #007700">. </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    <div class="example-contents"><p>El resultado del ejemplo
sería algo similar a:</p></div>
    <div class="example-contents screen">
<div class="examplescode"><pre class="examplescode">Coste apropiado encontrado: 10</pre>
</div>
    </div>
   </div>
  </p>
 </div>

 
 <div class="refsect1 notes" id="refsect1-function.password-hash-notes">
  <h3 class="title">Notas</h3>
  <div class="caution"><strong class="caution">Precaución</strong>
   <p class="para">
    Se recomienda encarecidamente que no se genere una sal propia para esta
    función. Creará una sal segura automáticamente si no
    se especifica una.
   </p>
    <p class="para">
    Como se ha observado arriba, proporcionar la opción <code class="literal">salt</code> en PHP 7.0
    generará una advertencia de obsolescencia. El soporte para proporcionar una sal manualmente
    podría ser eliminado en una versión futura de future.
   </p>
  </div>
  <blockquote class="note"><p><strong class="note">Nota</strong>: 
   <p class="para">
    Se recomienda probar esta función en los servidores que se estén usando, y ajustar el parámetro de coste
    para que la ejecución de la función tome menos de 100 milisegundos en sistemas interactivos.
    El script en el ejemplo de antes le ayudará a elegir un buen valor de coste para su hardware.
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Nota</strong>: 
   <span class="simpara">
    Las actualizaciones para los algoritmos admitidos por esta función (o los cambios al predeterminado)
    deben serguir las siguientes reglas:
   </span>
   <p class="para">
    <ul class="itemizedlist">
     <li class="listitem">
      <span class="simpara">
       Cualquier algoritmo nuevo debe estar en el núcleo por lo menos una versión completa de PHP
       antes de convertirse en predeterminado. Por lo que si, por ejemplo, un nuevo algoritmo se añade
       en la 7.5.5, no sería apto para ser el predeterminado hasta la 7.7 (ya que la 7.6
       sería la primera versión completa). Pero si se añadió un algoritmo diferente
       en la 7.6.0, también sería apto para ser el predeterminado en la 7.7.0.
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       El predeterminado debería cambiar únicamente en una versión completa (7.3.0, 8.0.0, etc.)
       y no en una versión de revisión. La única excepción es la emergencia de que se encuentre
       un fallo de seguridad crítico en el predeterminado
       actual.
      </span>
     </li>
    </ul>
   </p>
  </p></blockquote>
 </div>

 
 <div class="refsect1 seealso" id="refsect1-function.password-hash-seealso">
  <h3 class="title">Ver también</h3>
  <p class="para">
   <ul class="simplelist">
    <li><span class="function"><a href="function.password-verify.html" class="function" rel="rdfs-seeAlso">password_verify()</a> - Comprueba que la contrase&ntilde;a coincida con un hash</span></li>
    <li><span class="function"><a href="function.crypt.html" class="function" rel="rdfs-seeAlso">crypt()</a> - Hash de cadenas de un s&oacute;lo sentido</span></li>
    <li><a href="https://github.com/ircmaxell/password_compat" class="link external">&raquo;&nbsp;implementación en el espacio de usuario</a></li>
   </ul>
  </p>
 </div>

 
</div></div></div></body></html>