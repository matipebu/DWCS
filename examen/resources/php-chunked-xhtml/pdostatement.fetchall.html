<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Devuelve un array que contiene todas las filas del conjunto de resultados</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="pdostatement.fetch.html">« PDOStatement::fetch</a></li>
      <li style="float: right;"><a href="pdostatement.fetchcolumn.html">PDOStatement::fetchColumn »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="class.pdostatement.html">PDOStatement</a></li>
    <li>Devuelve un array que contiene todas las filas del conjunto de resultados</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="pdostatement.fetchall" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">PDOStatement::fetchAll</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.1.0, PHP 7, PHP 8, PECL pdo &gt;= 0.1.0)</p><p class="refpurpose"><span class="refname">PDOStatement::fetchAll</span> &mdash; <span class="dc-title">
   Devuelve un array que contiene todas las filas del conjunto de resultados
  </span></p>

 </div>
 <div class="refsect1 description" id="refsect1-pdostatement.fetchall-description">
  <h3 class="title">Descripción</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="methodname"><strong>PDOStatement::fetchAll</strong></span>(<span class="methodparam"><span class="type"><a href="language.types.integer.html" class="type int">int</a></span> <code class="parameter">$fetch_style</code><span class="initializer"> = ?</span></span>, <span class="methodparam"><span class="type"><a href="language.types.mixed.html" class="type mixed">mixed</a></span> <code class="parameter">$fetch_argument</code><span class="initializer"> = ?</span></span>, <span class="methodparam"><span class="type"><a href="language.types.array.html" class="type array">array</a></span> <code class="parameter">$ctor_args</code><span class="initializer"> = array()</span></span>): <span class="type"><a href="language.types.array.html" class="type array">array</a></span></div>

  
 </div>

 
 <div class="refsect1 parameters" id="refsect1-pdostatement.fetchall-parameters">
  <h3 class="title">Parámetros</h3>
  <p class="para">
   <dl>
    
     <dt><code class="parameter">fetch_style</code></dt>
     <dd>
      <p class="para">
       Controla el contenido del array devuelto, tal como está documentado en
       <span class="function"><a href="pdostatement.fetch.html" class="function">PDOStatement::fetch()</a></span>.
       El valor predeterminado es <strong><code><a href="pdo.constants.html#pdo.constants.attr-default-fetch-mode">PDO::ATTR_DEFAULT_FETCH_MODE</a></code></strong>
       (el cual por defecto es <strong><code><a href="pdo.constants.html#pdo.constants.fetch-both">PDO::FETCH_BOTH</a></code></strong>).
      </p>
      <p class="para">
       Para devolver un array que contenga todos los valores de una única columna del
       conjunto de resultados, se debe especificar <strong><code><a href="pdo.constants.html#pdo.constants.fetch-column">PDO::FETCH_COLUMN</a></code></strong>.
       Se puede especificar qué columna se desea obtener con el parámetro
       <code class="parameter">fetch_argument</code>.
      </p>
      <p class="para">
       Para obtener solamente los valores únicos de una sola columna del conjunto de resultados,
       se ha de realizar un OR a nivel de bits de <strong><code><a href="pdo.constants.html#pdo.constants.fetch-column">PDO::FETCH_COLUMN</a></code></strong> con
       <strong><code><a href="pdo.constants.html#pdo.constants.fetch-unique">PDO::FETCH_UNIQUE</a></code></strong>.
      </p>
      <p class="para">
       Para devolver un array asociativo agrupado según los valores de una columna
       especificada, se ha de realilar un OR a nivel de bits de
       <strong><code><a href="pdo.constants.html#pdo.constants.fetch-column">PDO::FETCH_COLUMN</a></code></strong> con <strong><code><a href="pdo.constants.html#pdo.constants.fetch-group">PDO::FETCH_GROUP</a></code></strong>.
      </p>
     </dd>
    
    
     <dt><code class="parameter">fetch_argument</code></dt>
     <dd>
      <p class="para">
       Este argumento tiene un significado diferente dependiendo del valor del
       parámetro <code class="parameter">fetch_style</code>:
       <ul class="itemizedlist">
        <li class="listitem">
         <p class="para">
          <strong><code><a href="pdo.constants.html#pdo.constants.fetch-column">PDO::FETCH_COLUMN</a></code></strong>: Devuelve la columna con el índice
          indicado basado en 0.
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <strong><code><a href="pdo.constants.html#pdo.constants.fetch-class">PDO::FETCH_CLASS</a></code></strong>: Devuelve instancias de la clase especificada,
          haciendo corresponder las columnas de cada fila con las propiedades con nombre de la clase.
         </p>
        </li>
        <li class="listitem">
         <p class="para">
          <strong><code><a href="pdo.constants.html#pdo.constants.fetch-func">PDO::FETCH_FUNC</a></code></strong>: Devuelve el resultado de llamar a
          la función especificada, usando cada columna de fila como parámetro de la llamada.
         </p>
        </li>
       </ul>
      </p>
     </dd>
    
    
     <dt><code class="parameter">ctor_args</code></dt>
     <dd>
      <p class="para">
       Los argumentos del constructor de la case cuando el parámetro
       <code class="parameter">fetch_style</code> es <strong><code><a href="pdo.constants.html#pdo.constants.fetch-class">PDO::FETCH_CLASS</a></code></strong>.
      </p>
     </dd>
    
   </dl>
  </p>
 </div>

 
 <div class="refsect1 returnvalues" id="refsect1-pdostatement.fetchall-returnvalues">
  <h3 class="title">Valores devueltos</h3>
  <p class="para">
   <span class="function"><strong>PDOStatement::fetchAll()</strong></span> devuelve un array que contiene
   todas las filas restantes del conjunto de resultados. El array representa cada
   fila como un array con valores de las columnas, o como un objeto con propiedades
   correspondientes a cada nombre de columna. Es devuelto un array vacío si hay
   cero resultados que obtener, o <strong><code><a href="reserved.constants.html#constant.false">false</a></code></strong> en caso de fallo.
  </p>
  <p class="para">
   Usar este método para obtener conjuntos de resultados grandes dará como resultado una
   fuerte demanda del sistema y, posiblemente, de los recursos de red. En lugar de recuperar
   todos los datos y manipularlos en PHP, considérese usar el servidor de bases
   de datos para manipular los conjuntos de resultados. Por ejemplo, se pueden usar las cláusulas
   WHERE y ORDER BY en sentencias SQL para restringir el resultado antes de recuperarlos y
   procesarlos con PHP.
  </p>
 </div>

 
 <div class="refsect1 examples" id="refsect1-pdostatement.fetchall-examples">
  <h3 class="title">Ejemplos</h3>
  <p class="para">
   <div class="example" id="example-1059"><p><strong>Ejemplo #1 Obtener todas las filas restantes de un conjunto de resultados</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$gsent </span><span style="color: #007700">= </span><span style="color: #0000BB">$gbd</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT name, colour FROM fruit"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$gsent</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">/* Obtener todas las filas restantes del conjunto de resultados */<br /></span><span style="color: #007700">print(</span><span style="color: #DD0000">"Obtener todas las filas restantes del conjunto de resultados:\n"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$resultado </span><span style="color: #007700">= </span><span style="color: #0000BB">$gsent</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchAll</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$resultado</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    <div class="example-contents"><p>El resultado del ejemplo
sería algo similar a:</p></div>
    <div class="example-contents screen">
<div class="examplescode"><pre class="examplescode">Obtener todas las filas restantes del conjunto de resultados:
Array
(
    [0] =&gt; Array
        (
            [name] =&gt; pear
            [0] =&gt; pear
            [colour] =&gt; green
            [1] =&gt; green
        )

    [1] =&gt; Array
        (
            [name] =&gt; watermelon
            [0] =&gt; watermelon
            [colour] =&gt; pink
            [1] =&gt; pink
        )

)</pre>
</div>
    </div>
   </div>
   <div class="example" id="example-1060"><p><strong>Ejemplo #2 Obtener todos los valores de una única columna de un conjunto de resultados</strong></p>
    <div class="example-contents"><p>
     El siguiente ejemplo demuestra cómo devolver todos los valores de una
     única columna de un conjunto de resultados, incluso si la sentencia SQL
     podría devolver múltiples columnas por cada fila.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$gsent </span><span style="color: #007700">= </span><span style="color: #0000BB">$gbd</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT name, colour FROM fruit"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$gsent</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">/* Obtener todos los valores de la primera columna */<br /></span><span style="color: #0000BB">$resultado </span><span style="color: #007700">= </span><span style="color: #0000BB">$gsent</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchAll</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_COLUMN</span><span style="color: #007700">, </span><span style="color: #0000BB">0</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$resultado</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    <div class="example-contents"><p>El resultado del ejemplo
sería algo similar a:</p></div>
    <div class="example-contents screen">
<div class="examplescode"><pre class="examplescode">Array(3)
(
    [0] =&gt;
    string(5) =&gt; apple
    [1] =&gt;
    string(4) =&gt; pear
    [2] =&gt;
    string(10) =&gt; watermelon
)</pre>
</div>
    </div>
   </div>
   <div class="example" id="example-1061"><p><strong>Ejemplo #3 Agrupar todos los valores según una única columna</strong></p>
    <div class="example-contents"><p>
     El siguiente ejemplo demuestra cómo devolver un array asociativo
     agrupado según los valores de la columna especificada del conjunto de resultados. El
     array contiene tres claves: los valores <code class="literal">apple</code> y
     <code class="literal">pear</code> son devueltos como arrays que contienen dos
     colores diferentes, mientras que <code class="literal">watermelon</code> es
     devuelto como un array que contiene un solo color.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$insert </span><span style="color: #007700">= </span><span style="color: #0000BB">$gbd</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"INSERT INTO fruit(name, colour) VALUES (?, ?)"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$insert</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'apple'</span><span style="color: #007700">, </span><span style="color: #DD0000">'green'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">$insert</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'pear'</span><span style="color: #007700">, </span><span style="color: #DD0000">'yellow'</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">$gsent </span><span style="color: #007700">= </span><span style="color: #0000BB">$gbd</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT name, colour FROM fruit"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$gsent</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">/* Agrupar valores según la primera columna */<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$gsent</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchAll</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_COLUMN</span><span style="color: #007700">|</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_GROUP</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    <div class="example-contents"><p>El resultado del ejemplo
sería algo similar a:</p></div>
    <div class="example-contents screen">
<div class="examplescode"><pre class="examplescode">array(3) {
  [&quot;apple&quot;]=&gt;
  array(2) {
    [0]=&gt;
    string(5) &quot;green&quot;
    [1]=&gt;
    string(3) &quot;red&quot;
  }
  [&quot;pear&quot;]=&gt;
  array(2) {
    [0]=&gt;
    string(5) &quot;green&quot;
    [1]=&gt;
    string(6) &quot;yellow&quot;
  }
  [&quot;watermelon&quot;]=&gt;
  array(1) {
    [0]=&gt;
    string(5) &quot;green&quot;
  }
}</pre>
</div>
    </div>
   </div>
   <div class="example" id="example-1062"><p><strong>Ejemplo #4 Instanciar una clase para cada resultado</strong></p>
    <div class="example-contents"><p>
     El siguiente ejemplo demuestra el comportamiento del estilo
     de obtención de <strong><code><a href="pdo.constants.html#pdo.constants.fetch-class">PDO::FETCH_CLASS</a></code></strong>.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class </span><span style="color: #0000BB">fruit </span><span style="color: #007700">{<br />    public </span><span style="color: #0000BB">$name</span><span style="color: #007700">;<br />    public </span><span style="color: #0000BB">$colour</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">$gsent </span><span style="color: #007700">= </span><span style="color: #0000BB">$gbd</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT name, colour FROM fruit"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$gsent</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">$resultado </span><span style="color: #007700">= </span><span style="color: #0000BB">$gsent</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchAll</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_CLASS</span><span style="color: #007700">, </span><span style="color: #DD0000">"fruit"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$resultado</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    <div class="example-contents"><p>El resultado del ejemplo
sería algo similar a:</p></div>
    <div class="example-contents screen">
<div class="examplescode"><pre class="examplescode">array(3) {
  [0]=&gt;
  object(fruit)#1 (2) {
    [&quot;name&quot;]=&gt;
    string(5) &quot;apple&quot;
    [&quot;colour&quot;]=&gt;
    string(5) &quot;green&quot;
  }
  [1]=&gt;
  object(fruit)#2 (2) {
    [&quot;name&quot;]=&gt;
    string(4) &quot;pear&quot;
    [&quot;colour&quot;]=&gt;
    string(6) &quot;yellow&quot;
  }
  [2]=&gt;
  object(fruit)#3 (2) {
    [&quot;name&quot;]=&gt;
    string(10) &quot;watermelon&quot;
    [&quot;colour&quot;]=&gt;
    string(4) &quot;pink&quot;
  }
}</pre>
</div>
    </div>
   </div>
   <div class="example" id="example-1063"><p><strong>Ejemplo #5 Invocar a una función por cada resultado</strong></p>
    <div class="example-contents"><p>
     El siguiente ejemplo demuestra el comportamiento del estilo
     de obtención de <strong><code><a href="pdo.constants.html#pdo.constants.fetch-func">PDO::FETCH_FUNC</a></code></strong>.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">fruit</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">, </span><span style="color: #0000BB">$colour</span><span style="color: #007700">) {<br />    return </span><span style="color: #DD0000">"</span><span style="color: #007700">{</span><span style="color: #0000BB">$name</span><span style="color: #007700">}</span><span style="color: #DD0000">: </span><span style="color: #007700">{</span><span style="color: #0000BB">$colour</span><span style="color: #007700">}</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">$gsent </span><span style="color: #007700">= </span><span style="color: #0000BB">$gbd</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT name, colour FROM fruit"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$gsent</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">$resultado </span><span style="color: #007700">= </span><span style="color: #0000BB">$gsent</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetchAll</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_FUNC</span><span style="color: #007700">, </span><span style="color: #DD0000">"fruit"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$resultado</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    <div class="example-contents"><p>El resultado del ejemplo
sería algo similar a:</p></div>
    <div class="example-contents screen">
<div class="examplescode"><pre class="examplescode">array(3) {
  [0]=&gt;
  string(12) &quot;apple: green&quot;
  [1]=&gt;
  string(12) &quot;pear: yellow&quot;
  [2]=&gt;
  string(16) &quot;watermelon: pink&quot;
}</pre>
</div>
    </div>
   </div>
   
  </p>
 </div>

 
 <div class="refsect1 seealso" id="refsect1-pdostatement.fetchall-seealso">
  <h3 class="title">Ver también</h3>
  <p class="para">
   <ul class="simplelist">
    <li><span class="function"><a href="pdo.query.html" class="function" rel="rdfs-seeAlso">PDO::query()</a> - Ejecuta una sentencia SQL, devolviendo un conjunto de resultados como un objeto PDOStatement</span></li>
    <li><span class="function"><a href="pdostatement.fetch.html" class="function" rel="rdfs-seeAlso">PDOStatement::fetch()</a> - Obtiene la siguiente fila de un conjunto de resultados</span></li>
    <li><span class="function"><a href="pdostatement.fetchcolumn.html" class="function" rel="rdfs-seeAlso">PDOStatement::fetchColumn()</a> - Devuelve una &uacute;nica columna de la siguiente fila de un conjunto de resultados</span></li>
    <li><span class="function"><a href="pdo.prepare.html" class="function" rel="rdfs-seeAlso">PDO::prepare()</a> - Prepara una sentencia para su ejecuci&oacute;n y devuelve un objeto sentencia</span></li>
    <li><span class="function"><a href="pdostatement.setfetchmode.html" class="function" rel="rdfs-seeAlso">PDOStatement::setFetchMode()</a> - Establece el modo de obtenci&oacute;n para esta sentencia</span></li>
   </ul>
  </p>
 </div>

</div></div></div></body></html>