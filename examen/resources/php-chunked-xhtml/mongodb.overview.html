<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Vista general de la arquitectura</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="mongodb.architecture.html">« Arquitectura del controlador y sus entresijos</a></li>
      <li style="float: right;"><a href="mongodb.connection-handling.html">Connections »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="mongodb.architecture.html">Arquitectura del controlador y sus entresijos</a></li>
    <li>Vista general de la arquitectura</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="mongodb.overview" class="section">
  
  <h2 class="title">Vista general de la arquitectura</h2>

  <p class="para">
   Esta sección explica cómo todas las diferentes partes del controlador encajan
   entre sí, desde tiempos de ejecución de lenguaje diferentes, a través de extensiones y
   hacia las bibliotecas de PHP por último. Esta nueva arquitectura ha reemplazado a la antigua
   extensión <code class="code">mongo</code>. Nos referiremos a la nueva
   como la extensión <code class="code">mongodb</code>.
  </p>
  <p class="para">
   <div class="mediaobject">
    
    <div class="imageobject">
     <img src="images/d1263251206d407971c1873f52f5e4ad-driver_arch.png" alt="Diagrama de la arquitectura"   />
    </div>
   </div>
  </p>
  <p class="para">
   En lo más alto de esta pila se sitúa una
   <a href="https://github.com/mongodb/mongo-php-library" class="link external">&raquo;&nbsp;biblioteca de PHP</a> pura, la cual distribuimos
   como um paquete de Composer. Esta biblioteca proporcionará una API similar
   a la que los usuarios llevan esperando desde el controlador de mongo antiguo (p.ej. métodos CRUD,
   objetos de bases de datos y colecciones, ayudantes de comandos), por lo que esperamos que sea una
   dependencia común para la mayoría de las aplicaciones construidas con MongoDB. Esta biblioteca
   también implementa
   <a href="https://github.com/mongodb/specifications" class="link external">&raquo;&nbsp;especificaciones</a> comunes, por el
   interés de mejorar la consistencia de la API a través de todos los
   <a href="https://www.mongodb.com/docs/drivers/" class="link external">&raquo;&nbsp;controladores</a> mantenidos por
   MongoDB (y con suerte, también algunos controladores de la comunidad).
  </p>

  <p class="para">
   Justo debajo de la biblioteca tenemos los controladores de nivel más bajo: uno por plataforma.
   Estas extensiones formarán de forma efectiva el «pegamento» entre PHP y HHVM y nuestras
   bibliotecas del sistema (<a href="https://github.com/mongodb/mongo-c-driver" class="link external">&raquo;&nbsp;libmongoc</a> y
   <a href="https://github.com/mongodb/mongo-c-driver/tree/master/src/libbson" class="link external">&raquo;&nbsp;libbson</a>). Estas extensiones
   expondrán una API pública idéntica para la funcionalidad más
   esencial y sensible al rendimiento:

   <ul class="simplelist">
    <li>Administración de conexiones</li>
    <li>Codificación y decodificación de BSON</li>
    <li>Serializacón documentos de objetos (para dar soporte a bibliotecas ODM)</li>
    <li>Ejecución de  comandos y escritura de operaciones</li>
    <li>Manejo de consultas y cursores</li>
   </ul>
  </p>

  <p class="para">
   Al separar los entresijos del contrlador y la API de alto nivel en extensiones y
   bibliotecas de PHP, respectivamente, esperamos reducir nuestra carga de manteminiento y
   permitir una iteración más rápida en nuevas características. Como efecto secundario de agradecer, esto
   también hace más sencillo que cualquiera pueda contribuir al controlador. Además,
   una API pública idéntica para estas extensiones hará mucho más fácil
   portar una aplicación durante tiempos de ejecución de PHP, si la aplicación usa
   directamente el controlador de bajo nivel o una biblioteca de alto nivel.
  </p>
  <p class="para">
   <a href="https://www.mongodb.com/docs/manual/core/gridfs/" class="link external">&raquo;&nbsp;GridFS</a> es un buen ejemplo
   de por qué elegimos esta dirección.
   Aunque implementamos GridFS en C para nuestro controlador antiguo de mongo, realmente es
   una especificación de alto nivel. Su API es una abstracción para
   acceder a dos colecciones: ficheros (esto es, metadatos) y trozos (esto es, bloques de
   datos). Asimismo, todo el añadido sintáctico encontrado en el controlador antiguo de mongo,
   como el procesamiento de ficheros subidos o la exposición de ficheros de GridFS como flujos de PHP,
   se puede implementar en PHP puro. Siempre que poseamos métodos rendidores para
   leer desde y escribir en colecciones de GridFS (y gracias a nuestras extensiones
   de bajo nivel), lo haremos: al mover esta API a PHP todos ganamos.
  </p>
  <p class="para">
   Antes mencionamos que esperamos que la biblioteca de PHP sea una dependencia
   común para <em>la mayoría</em> de las aplicaciones, pero no para
   <em>todas</em>. Algunos usuarios podrían prefereir adherirse a la API sin
   florituras ofrecida por las extensiones, o crear su propia abstracción de alto nivel
   (parecida a <a href="https://github.com/doctrine/mongodb" class="link external">&raquo;&nbsp;Doctrine MongoDB</a> para
   el controlador antiguo de mongo). Las futuras bibliotecas podrían incluir una biblioteca de PHP dirigida
   a la administración de MongoDB con una API para la gestión de varios usuarios
   y comandos de operaciones. La siguiente versión mayor de
   <a href="https://github.com/doctrine/mongodb-odm" class="link external">&raquo;&nbsp;Doctrine MongoDB ODM</a>
   probablemente también se sitúe directamente el lo alto de esta extensiones.
  </p>
  <p class="para">
   Aunque continuaremos manteniendo y dando soporte al controlador antiguo de mongo y a sus
   usuarios para el futuro próximo, invitamos a todo el mundo a utilizar el
   controlador de nueva generación y considerarlo para cualquier proyecto nuevo por venir.
   Los componentes esenciales se pueden encontrar a través de GitHub y JIRA:

   <table class="doctable table">
    <caption><strong>Ubicaciones del código fuente del controlador y JIRA</strong></caption>
    
     <thead>
      <tr>
       <th>Proyecto</th>
       <th>GitHub</th>
       <th>JIRA</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>Biblioteca de PHP</td>
       <td><a href="https://github.com/mongodb/mongo-php-library" class="link external">&raquo;&nbsp;mongodb/mongo-php-library</a></td>
       <td><a href="https://jira.mongodb.org/browse/PHPLIB" class="link external">&raquo;&nbsp;PHPLIB</a></td>
      </tr>

      <tr>
       <td>Controlador de PHP 5 y PHP 7 (phongo)</td>
       <td><a href="https://github.com/mongodb/mongo-php-driver" class="link external">&raquo;&nbsp;mongodb/mongo-php-driver</a></td>
       <td><a href="https://jira.mongodb.org/browse/PHPC" class="link external">&raquo;&nbsp;PHPC</a></td>
      </tr>

     </tbody>
    
   </table>

  </p>

  <p class="para">
   El proyecto <a href="https://jira.mongodb.org/browse/PHP" class="link external">&raquo;&nbsp;PHP</a> existente en JIRA
   permanecerá abierto para la notificación de errores del controlador antiguo de mongo, aunque
   solicitaremos que utilice los nuevos proyectos de antes para cualquier cosa concerniente a
   nuestros controladores de la siguiente generación.
  </p>
 </div></div></div></body></html>