<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Vincula una variable PHP a un par&aacute;metro de una sentencia SQL</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.db2-autocommit.html">« db2_autocommit</a></li>
      <li style="float: right;"><a href="function.db2-client-info.html">db2_client_info »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.ibm-db2.html">Funciones de IBM DB2</a></li>
    <li>Vincula una variable PHP a un par&aacute;metro de una sentencia SQL</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.db2-bind-param" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">db2_bind_param</h1>
  <p class="verinfo">(PECL ibm_db2 &gt;= 1.0.0)</p><p class="refpurpose"><span class="refname">db2_bind_param</span> &mdash; <span class="dc-title">
   Vincula una variable PHP a un parámetro de una sentencia SQL
  </span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.db2-bind-param-description">
  <h3 class="title">Descripción</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>db2_bind_param</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.resource.html" class="type resource">resource</a></span> <code class="parameter">$stmt</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.integer.html" class="type int">int</a></span> <code class="parameter">$parameter-number</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.string.html" class="type string">string</a></span> <code class="parameter">$variable-name</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.integer.html" class="type int">int</a></span> <code class="parameter">$parameter-type</code><span class="initializer"> = ?</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.integer.html" class="type int">int</a></span> <code class="parameter">$data-type</code><span class="initializer"> = 0</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.integer.html" class="type int">int</a></span> <code class="parameter">$precision</code><span class="initializer"> = -1</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type"><a href="language.types.integer.html" class="type int">int</a></span> <code class="parameter">$scale</code><span class="initializer"> = 0</span></span><br>): <span class="type"><a href="language.types.boolean.html" class="type bool">bool</a></span></div>


  <p class="para rdfs-comment">
   Vincula una variabel PHP a una sentencia SQL de un recurso devuelto
   por <span class="function"><a href="function.db2-prepare.html" class="function">db2_prepare()</a></span>. Esta función proporciona más
   control sobre el tipo de parámetro, tipo de dato, procesión, y escala del
   parámetro que cuando se pasa la variabel como parte del array de entrada
   opcional en <span class="function"><a href="function.db2-execute.html" class="function">db2_execute()</a></span>.
  </p>

 </div>

 <div class="refsect1 parameters" id="refsect1-function.db2-bind-param-parameters">
  <h3 class="title">Parámetros</h3>
  <p class="para">
   <dl>
    
     <dt><code class="parameter">stmt</code></dt>
     <dd>
      <p class="para">
       Sentencia preparada devuelta por <span class="function"><a href="function.db2-prepare.html" class="function">db2_prepare()</a></span>.
      </p>
     </dd>
    
    
     <dt><code class="parameter">parameter-number</code></dt>
     <dd>
      <p class="para">
       Especifica la posición del parámetro en la sentencia preparada, utilizando
       1 como primera posición.
      </p>
     </dd>
    
    
    <dt><code class="parameter">variable-name</code></dt>
     <dd>
      <p class="para">
       String con el nombre de la variabel PHP que se vinculará
       al parámetro especificado por <code class="parameter">parameter-number</code>.
      </p>
     </dd>
    
    
     <dt><code class="parameter">parameter-type</code></dt>
     <dd>
      <p class="para">
       Constante que especifica si la variable PHP debe vincularse al parámetro
       SQL como un parámetro de entrada (<code class="literal">DB2_PARAM_IN</code>),
       de salida (<code class="literal">DB2_PARAM_OUT</code>), o como un parámetro
       que acepta entrada y salida
       (<code class="literal">DB2_PARAM_INOUT</code>). Para evitar fugas de memoria, puede
       especificarse <code class="literal">DB2_PARAM_FILE</code> para vincular la variable PHP
       al nombre de un fichero que contiene objetos de gran tamaño (BLOB, CLOB,
       o DBCLOB).
      </p>
     </dd>
    
    
     <dt><code class="parameter">data-type</code></dt>
     <dd>
      <p class="para">
       Constante que especifica el tipo de dato SQL de la variable PHP que
       se vincula: de entre <code class="literal">DB2_BINARY</code>,
       <code class="literal">DB2_CHAR</code>, <code class="literal">DB2_DOUBLE</code>, o
       <code class="literal">DB2_LONG</code>.
      </p>
     </dd>
    
    
     <dt><code class="parameter">precision</code></dt>
     <dd>
      <p class="para">
       Especifica la precisión con la que se debe vincular a la base de
       datos. Este parámetro se puede utilizar también para consultar valores de
       salida XML de procedimientos almacenados. Un valor no negativo especifica el tamaño
       máximo de datos XML que se consultarán de la base de datos. Si este parámetro no se
       utiliza, se asumirá por omisión 1MB para consultar el valor de salida XML
       del procedimiento almacenado.
      </p>
     </dd>
    
    
     <dt><code class="parameter">scale</code></dt>
     <dd>
      <p class="para">
       Especifica la escala de la variable que se vinculará a la
       base de datos.
      </p>
     </dd>
    
   </dl>
  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.db2-bind-param-returnvalues">
  <h3 class="title">Valores devueltos</h3>
  <p class="para">
   Devuelve <strong><code><a href="reserved.constants.html#constant.true">true</a></code></strong> en caso de éxito o <strong><code><a href="reserved.constants.html#constant.false">false</a></code></strong> en caso de error.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.db2-bind-param-examples">
  <h3 class="title">Ejemplos</h3>
  <p class="para">
   <div class="example" id="example-1228">
    <p><strong>Ejemplo #1 Vinculando variables PHP a sentencias preparadas</strong></p>
    <div class="example-contents"><p>
     La sentencia SQL del siguiente ejemplo utiliza dos parámetros de entrada en
     la cláusula WHERE. Invocamos <span class="function"><strong>db2_bind_param()</strong></span> para vincular dos
     variables PHP a los correspondientes parámetros SQL. Debe tenerse en cuenta que no es
     necesario que se hayan declarado o asignado las variables PHP antes de llamar a
     <span class="function"><strong>db2_bind_param()</strong></span>; en el ejemplo, se asigna un valor a
     <code class="literal">$lower_limit</code> antes de llamar a
     <span class="function"><strong>db2_bind_param()</strong></span>, a diferencia de <code class="literal">$upper_limit</code>,
     donde el valor se asigna tras llamar a
     <span class="function"><strong>db2_bind_param()</strong></span>. Se deben vincular las variables y, para
     parámetros que acepten entradas, debe asignarse el valor antes de llamar a
     parameters that accept input, must have any value assigned, before calling
     <span class="function"><a href="function.db2-execute.html" class="function">db2_execute()</a></span>.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br />$sql </span><span style="color: #007700">= </span><span style="color: #DD0000">'SELECT name, breed, weight FROM animals<br />    WHERE weight &gt; ? AND weight &lt; ?'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$conn </span><span style="color: #007700">= </span><span style="color: #0000BB">db2_connect</span><span style="color: #007700">(</span><span style="color: #0000BB">$database</span><span style="color: #007700">, </span><span style="color: #0000BB">$user</span><span style="color: #007700">, </span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$stmt </span><span style="color: #007700">= </span><span style="color: #0000BB">db2_prepare</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">, </span><span style="color: #0000BB">$sql</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Podemos declarar la variable antes de llamar a db2_bind_param()<br /></span><span style="color: #0000BB">$lower_limit </span><span style="color: #007700">= </span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">db2_bind_param</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">, </span><span style="color: #0000BB">1</span><span style="color: #007700">, </span><span style="color: #DD0000">"lower_limit"</span><span style="color: #007700">, </span><span style="color: #0000BB">DB2_PARAM_IN</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">db2_bind_param</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">, </span><span style="color: #0000BB">2</span><span style="color: #007700">, </span><span style="color: #DD0000">"upper_limit"</span><span style="color: #007700">, </span><span style="color: #0000BB">DB2_PARAM_IN</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Podemos declarar la variable tras llamar a db2_bind_param()<br /></span><span style="color: #0000BB">$upper_limit </span><span style="color: #007700">= </span><span style="color: #0000BB">15.0</span><span style="color: #007700">;<br /><br />if (</span><span style="color: #0000BB">db2_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">)) {<br />    while (</span><span style="color: #0000BB">$row </span><span style="color: #007700">= </span><span style="color: #0000BB">db2_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">)) {<br />        print </span><span style="color: #DD0000">"</span><span style="color: #007700">{</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]}</span><span style="color: #DD0000">, </span><span style="color: #007700">{</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]}</span><span style="color: #DD0000">, </span><span style="color: #007700">{</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]}</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />    }<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    <div class="example-contents"><p>El resultado del ejemplo sería:</p></div>
    <div class="example-contents screen">
<div class="examplescode"><pre class="examplescode">Pook, cat, 3.2
Rickety Ride, goat, 9.7
Peaches, dog, 12.3</pre>
</div>
    </div>
   </div>
   <div class="example" id="example-1229">
    <p><strong>Ejemplo #2 Llamada a procedimientos almacenados con parámetros de Entrada y Salida</strong></p>
    <div class="example-contents"><p>
     El procedimiento almacenado match_animal del siguiente ejemplo acepta
     tres parámetros:
     <ol type="1">
      <li class="listitem">
       <p class="para">
        un parámetro (IN) de entrada que acepta el nombre del primer animal como
        entrada
       </p>
      </li>
      <li class="listitem">
       <p class="para">
        un parámetro (INOUT) de entrada-salida que acepta el nombre del segundo
        animal como entrada y devuelve el string <code class="literal">TRUE</code> si coincidiera
        algún animal de la base de datos
       </p>
      </li>
      <li class="listitem">
       <p class="para">
        un parámetro (OUT) de salida que devuelve la suma del peso de los dos
        animales identificados
       </p>
      </li>
     </ol>
     Además, el procedimiento almacenado devuelve el juego de resultados que corresponde
     a la lista de animales en orden alfabética comenzando por el animal 
     del valor de entrada del primer parámetro, y terminando en el animal
     correspondiente al valor de entrada del segundo parámetro.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br /><br />$sql </span><span style="color: #007700">= </span><span style="color: #DD0000">'CALL match_animal(?, ?, ?)'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$conn </span><span style="color: #007700">= </span><span style="color: #0000BB">db2_connect</span><span style="color: #007700">(</span><span style="color: #0000BB">$database</span><span style="color: #007700">, </span><span style="color: #0000BB">$user</span><span style="color: #007700">, </span><span style="color: #0000BB">$password</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$stmt </span><span style="color: #007700">= </span><span style="color: #0000BB">db2_prepare</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">, </span><span style="color: #0000BB">$sql</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$name </span><span style="color: #007700">= </span><span style="color: #DD0000">"Peaches"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$second_name </span><span style="color: #007700">= </span><span style="color: #DD0000">"Rickety Ride"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$weight </span><span style="color: #007700">= </span><span style="color: #0000BB">0</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">db2_bind_param</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">, </span><span style="color: #0000BB">1</span><span style="color: #007700">, </span><span style="color: #DD0000">"name"</span><span style="color: #007700">, </span><span style="color: #0000BB">DB2_PARAM_IN</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">db2_bind_param</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">, </span><span style="color: #0000BB">2</span><span style="color: #007700">, </span><span style="color: #DD0000">"second_name"</span><span style="color: #007700">, </span><span style="color: #0000BB">DB2_PARAM_INOUT</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">db2_bind_param</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">, </span><span style="color: #0000BB">3</span><span style="color: #007700">, </span><span style="color: #DD0000">"weight"</span><span style="color: #007700">, </span><span style="color: #0000BB">DB2_PARAM_OUT</span><span style="color: #007700">);<br /><br />print </span><span style="color: #DD0000">"Valores de los parámetros vinculados _antes_ de la llamada:\n"</span><span style="color: #007700">;<br />print </span><span style="color: #DD0000">"  1: </span><span style="color: #007700">{</span><span style="color: #0000BB">$name</span><span style="color: #007700">}</span><span style="color: #DD0000"> 2: </span><span style="color: #007700">{</span><span style="color: #0000BB">$second_name</span><span style="color: #007700">}</span><span style="color: #DD0000"> 3: </span><span style="color: #007700">{</span><span style="color: #0000BB">$weight</span><span style="color: #007700">}</span><span style="color: #DD0000">\n\n"</span><span style="color: #007700">;<br /><br />if (</span><span style="color: #0000BB">db2_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">)) {<br />    print </span><span style="color: #DD0000">"Valores de los parámetros vinculados _tras_ la llamada:\n"</span><span style="color: #007700">;<br />    print </span><span style="color: #DD0000">"  1: </span><span style="color: #007700">{</span><span style="color: #0000BB">$name</span><span style="color: #007700">}</span><span style="color: #DD0000"> 2: </span><span style="color: #007700">{</span><span style="color: #0000BB">$second_name</span><span style="color: #007700">}</span><span style="color: #DD0000"> 3: </span><span style="color: #007700">{</span><span style="color: #0000BB">$weight</span><span style="color: #007700">}</span><span style="color: #DD0000">\n\n"</span><span style="color: #007700">;<br /><br />    print </span><span style="color: #DD0000">"Resultados:\n"</span><span style="color: #007700">;<br />    while (</span><span style="color: #0000BB">$row </span><span style="color: #007700">= </span><span style="color: #0000BB">db2_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">)) {<br />        print </span><span style="color: #DD0000">"  </span><span style="color: #007700">{</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]}</span><span style="color: #DD0000">, </span><span style="color: #007700">{</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]}</span><span style="color: #DD0000">, </span><span style="color: #007700">{</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]}</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />    }<br />}<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

    <div class="example-contents"><p>El resultado del ejemplo sería:</p></div>
    <div class="example-contents screen">
<div class="examplescode"><pre class="examplescode">Valores de los parámetros vinculados _antes_ de la llamada:
  1: Peaches 2: Rickety Ride 3: 0

Valores de los parámetros vinculados _tras_ la llamada:
  1: Peaches 2: TRUE 3: 22

Resultados:
  Peaches, dog, 12.3
  Pook, cat, 3.2
  Rickety Ride, goat, 9.7</pre>
</div>
    </div>
   </div>
   <div class="example" id="example-1230">
    <p><strong>Ejemplo #3 Insertando un objeto extenso binario (BLOB) directamente desde un fichero</strong></p>
    <div class="example-contents"><p>
     Los datos de objetos extensos se suelen almacenar en ficheros, como por ejemplo documentos
     XML o ficheros de audio. En lugar de guardar el fichero completo en una variable
     PHP, para después vincular ésta a una sentencia SQL, se puede evitar esta
     sobrecarga de memoria vinculando directamente el fichero al parámetro de
     entrada de la sentencia SQL. El siguiente ejemplo demuestra cómo vincular
     directamente un fichero a una columna BLOB.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000"><span style="color: #0000BB">&lt;?php<br />$stmt </span><span style="color: #007700">= </span><span style="color: #0000BB">db2_prepare</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">, </span><span style="color: #DD0000">"INSERT INTO animal_pictures(picture) VALUES (?)"</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$picture </span><span style="color: #007700">= </span><span style="color: #DD0000">"/opt/albums/spook/grooming.jpg"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$rc </span><span style="color: #007700">= </span><span style="color: #0000BB">db2_bind_param</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">, </span><span style="color: #0000BB">1</span><span style="color: #007700">, </span><span style="color: #DD0000">"picture"</span><span style="color: #007700">, </span><span style="color: #0000BB">DB2_PARAM_FILE</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$rc </span><span style="color: #007700">= </span><span style="color: #0000BB">db2_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span></span></code></div>
    </div>

   </div>

  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.db2-bind-param-seealso">
  <h3 class="title">Ver también</h3>
  <p class="para">
   <ul class="simplelist">
    <li><span class="function"><a href="function.db2-execute.html" class="function" rel="rdfs-seeAlso">db2_execute()</a> - Ejecutar una sentencia SQL preparada</span></li>
    <li><span class="function"><a href="function.db2-prepare.html" class="function" rel="rdfs-seeAlso">db2_prepare()</a> - Prepara un comando SQL para su ejecuci&oacute;n</span></li>
   </ul>
  </p>
 </div>


</div></div></div></body></html>